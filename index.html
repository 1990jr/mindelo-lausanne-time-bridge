<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindelo ‚Üî Lausanne Time Bridge</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåâ</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== CSS Reset & Variables ===== */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Cabo Verde palette */
            --cv-ocean: #0077b6;
            --cv-deep: #023e8a;
            --cv-sky: #48cae4;
            --cv-sand: #f4a261;
            --cv-warm: #e76f51;
            --cv-light: #caf0f8;
            --cv-gradient: linear-gradient(135deg, #023e8a 0%, #0077b6 40%, #48cae4 70%, #f4a261 100%);

            /* Swiss palette */
            --ch-red: #d62828;
            --ch-mountain: #2d6a4f;
            --ch-snow: #f8f9fa;
            --ch-slate: #495057;
            --ch-lake: #457b9d;
            --ch-cream: #fefae0;
            --ch-gradient: linear-gradient(135deg, #495057 0%, #457b9d 30%, #2d6a4f 60%, #f8f9fa 100%);

            /* Shared */
            --bridge-gold: #d4a373;
            --text-dark: #1a1a2e;
            --text-light: #f8f9fa;
            --font-body: 'Inter', -apple-system, sans-serif;
            --font-display: 'Playfair Display', Georgia, serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            color: var(--text-dark);
            background: #f0f0f5;
            overflow-x: hidden;
        }

        /* ===== Header / Bridge ===== */
        .bridge-header {
            background: linear-gradient(135deg, var(--cv-deep) 0%, var(--bridge-gold) 50%, var(--ch-mountain) 100%);
            padding: 1.5rem 1rem 1rem;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .bridge-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.5;
        }

        .bridge-header h1 {
            font-family: var(--font-display);
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .bridge-header h1 .bridge-icon {
            display: inline-block;
            margin: 0 0.3em;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .bridge-header .subtitle {
            font-size: 0.95rem;
            opacity: 0.85;
            margin-top: 0.3rem;
            position: relative;
            z-index: 1;
            font-weight: 300;
        }

        /* ===== Language Switcher ===== */
        .lang-switcher {
            display: flex;
            justify-content: center;
            gap: 0.4rem;
            margin-top: 0.75rem;
            position: relative;
            z-index: 1;
        }

        .lang-btn {
            background: rgba(255,255,255,0.15);
            border: 1.5px solid rgba(255,255,255,0.3);
            color: rgba(255,255,255,0.8);
            padding: 0.25rem 0.7rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: var(--font-body);
            letter-spacing: 0.5px;
        }

        .lang-btn:hover {
            background: rgba(255,255,255,0.25);
            color: white;
        }

        .lang-btn.active {
            background: white;
            color: var(--text-dark);
            border-color: white;
        }

        /* ===== Time Difference Banner ===== */
        .time-diff-banner {
            background: var(--text-dark);
            color: var(--text-light);
            text-align: center;
            padding: 0.5rem;
            font-size: 0.85rem;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .time-diff-banner span {
            color: var(--bridge-gold);
        }

        /* ===== Dual Clock Section ===== */
        .clocks-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            min-height: 320px;
        }

        .clock-panel {
            padding: 2rem 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .clock-panel::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            opacity: 0.08;
            z-index: 0;
        }

        .clock-panel > * {
            position: relative;
            z-index: 1;
        }

        /* Cabo Verde panel */
        .clock-cv {
            background: linear-gradient(180deg, #023e8a 0%, #0077b6 60%, #48cae4 100%);
            color: white;
        }

        .clock-cv::before {
            background:
                radial-gradient(ellipse at 50% 120%, rgba(244, 162, 97, 0.3) 0%, transparent 60%),
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 200'%3E%3Cpath d='M0,160 Q50,140 100,155 T200,150 T300,145 T400,160 L400,200 L0,200 Z' fill='%23f4a261' opacity='0.15'/%3E%3Cpath d='M0,170 Q60,155 120,165 T240,160 T360,158 T400,170 L400,200 L0,200 Z' fill='%2348cae4' opacity='0.1'/%3E%3C/svg%3E");
            background-size: cover;
            background-position: bottom;
        }

        /* Swiss panel */
        .clock-ch {
            background: linear-gradient(180deg, #457b9d 0%, #a8dadc 40%, #f1faee 100%);
            color: var(--text-dark);
        }

        .clock-ch::before {
            background:
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 200'%3E%3Cpath d='M0,120 L40,80 L80,110 L130,50 L180,90 L220,40 L270,85 L320,55 L360,95 L400,70 L400,200 L0,200 Z' fill='%232d6a4f' opacity='0.08'/%3E%3Cpath d='M0,150 L50,120 L100,140 L160,100 L210,130 L260,95 L310,125 L370,105 L400,120 L400,200 L0,200 Z' fill='%23495057' opacity='0.05'/%3E%3C/svg%3E");
            background-size: cover;
            background-position: bottom;
        }

        .clock-location {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
            opacity: 0.8;
            margin-bottom: 0.25rem;
        }

        .clock-city {
            font-family: var(--font-display);
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .clock-flag {
            font-size: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .clock-time {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            letter-spacing: 2px;
            line-height: 1;
        }

        .clock-seconds {
            font-size: 0.5em;
            opacity: 0.7;
            font-weight: 400;
        }

        .clock-date {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            opacity: 0.8;
            font-weight: 400;
        }

        .clock-timezone {
            font-size: 0.75rem;
            opacity: 0.6;
            margin-top: 0.25rem;
            font-weight: 500;
        }

        /* ===== "What's Happening Now" Section ===== */
        .happening-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
        }

        .happening-panel {
            padding: 1.5rem;
            text-align: center;
        }

        .happening-cv {
            background: linear-gradient(135deg, #caf0f8, #e8f8ff);
            border-bottom: 3px solid var(--cv-ocean);
        }

        .happening-ch {
            background: linear-gradient(135deg, #f1faee, #fefae0);
            border-bottom: 3px solid var(--ch-mountain);
        }

        .happening-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 600;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .happening-emoji {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .happening-text {
            font-size: 0.95rem;
            line-height: 1.5;
            font-weight: 500;
            color: var(--text-dark);
        }

        /* ===== Best Time To Call ===== */
        .call-section {
            background: #ffffff;
            padding: 0 1.5rem 1.75rem;
        }

        .call-card {
            max-width: 900px;
            margin: 0 auto;
            border: 1px solid #e4e6ea;
            border-radius: 14px;
            background: linear-gradient(145deg, #ffffff, #f7f9fb);
            padding: 1rem;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        }

        .call-status {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 0.35rem;
            color: var(--text-dark);
        }

        .call-next {
            font-size: 0.9rem;
            color: #4f5b67;
            margin-bottom: 0.9rem;
        }

        .work-hours-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .hours-panel {
            border-radius: 10px;
            padding: 0.75rem;
            background: #f8fafc;
        }

        .hours-cv {
            border-left: 3px solid var(--cv-ocean);
        }

        .hours-ch {
            border-left: 3px solid var(--ch-red);
        }

        .hours-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            color: #6a7178;
            margin-bottom: 0.25rem;
            font-weight: 600;
        }

        .hours-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: #1f2933;
        }

        /* ===== Weather Section ===== */
        .weather-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1px;
            background: #e0e0e0;
        }

        .weather-panel {
            padding: 1.5rem;
            background: white;
            text-align: center;
        }

        .weather-panel h3 {
            font-family: var(--font-display);
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .weather-cv h3 { color: var(--cv-ocean); }
        .weather-ch h3 { color: var(--ch-mountain); }

        .weather-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .weather-temp {
            font-size: 2rem;
            font-weight: 700;
        }

        .weather-desc {
            font-size: 0.85rem;
            color: #666;
            text-transform: capitalize;
            margin-top: 0.25rem;
        }

        .weather-details {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 0.75rem;
            font-size: 0.8rem;
            color: #888;
        }

        .weather-details span {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .weather-error {
            font-size: 0.85rem;
            color: #999;
            padding: 1rem;
        }

        .weather-meta {
            margin-top: 0.8rem;
            font-size: 0.75rem;
            color: #7a828b;
            font-weight: 500;
        }

        /* ===== Sunrise / Sunset Section ===== */
        .sun-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1px;
            background: #e0e0e0;
        }

        .sun-panel {
            padding: 1.5rem;
            background: #ffffff;
            text-align: center;
        }

        .sun-panel h3 {
            font-family: var(--font-display);
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .sun-cv h3 { color: var(--cv-ocean); }
        .sun-ch h3 { color: var(--ch-mountain); }

        .sun-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.6rem;
        }

        .sun-metric {
            background: #f8fafc;
            border-radius: 10px;
            padding: 0.65rem 0.5rem;
        }

        .sun-metric-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.6px;
            color: #6a7178;
            margin-bottom: 0.25rem;
            font-weight: 600;
        }

        .sun-metric-value {
            font-size: 0.95rem;
            font-weight: 700;
            color: #1f2933;
            font-variant-numeric: tabular-nums;
        }

        .sun-diff {
            grid-column: 1 / -1;
            background: #f4f6f9;
            text-align: center;
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
            color: #44505c;
            font-weight: 600;
        }

        /* ===== Section Dividers ===== */
        .section-title {
            text-align: center;
            padding: 1.5rem 1rem 0.75rem;
            background: #f0f0f5;
        }

        .section-title h2 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--text-dark);
        }

        .section-title p {
            font-size: 0.85rem;
            color: #888;
            margin-top: 0.25rem;
        }

        /* ===== Cultural Calendar ===== */
        .calendar-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            padding: 0 1rem 1rem;
            background: #f0f0f5;
        }

        .calendar-panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .calendar-header {
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #f0f0f0;
        }

        .calendar-header h3 {
            font-family: var(--font-display);
            font-size: 1.05rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .calendar-cv .calendar-header h3 { color: var(--cv-ocean); }
        .calendar-ch .calendar-header h3 { color: var(--ch-mountain); }

        .event-count {
            font-family: var(--font-body);
            font-size: 0.65rem;
            font-weight: 600;
            background: #eee;
            color: #888;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            letter-spacing: 0.3px;
        }

        /* Next up highlight */
        .calendar-next {
            padding: 0.9rem 1.25rem;
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .calendar-cv .calendar-next {
            background: linear-gradient(135deg, #e8f4fd, #caf0f8);
            border-bottom: 2px solid var(--cv-ocean);
        }

        .calendar-ch .calendar-next {
            background: linear-gradient(135deg, #edf6f0, #dceee4);
            border-bottom: 2px solid var(--ch-mountain);
        }

        .next-label {
            font-size: 0.6rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            opacity: 0.6;
            margin-bottom: 0.15rem;
        }

        .calendar-next .event-date {
            background: white;
            border-radius: 8px;
            padding: 0.35rem 0.55rem;
            font-size: 0.7rem;
            font-weight: 700;
            white-space: nowrap;
            min-width: 52px;
            text-align: center;
            color: #333;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .calendar-cv .calendar-next .event-date { border-left: 3px solid var(--cv-ocean); }
        .calendar-ch .calendar-next .event-date { border-left: 3px solid var(--ch-mountain); }

        .calendar-next .event-name {
            font-weight: 700;
            font-size: 0.9rem;
        }

        .calendar-next .event-desc {
            font-size: 0.75rem;
            color: #666;
            margin-top: 0.1rem;
        }

        /* Scrollable list */
        .calendar-list-wrapper {
            position: relative;
        }

        .calendar-list {
            max-height: 280px;
            overflow-y: auto;
            padding: 0.25rem 1.25rem 0.75rem;
            scrollbar-width: thin;
            scrollbar-color: #ccc transparent;
        }

        .calendar-list::-webkit-scrollbar {
            width: 4px;
        }

        .calendar-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .calendar-list::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 4px;
        }

        .calendar-fade {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px;
            background: linear-gradient(transparent, white);
            pointer-events: none;
            border-radius: 0 0 12px 12px;
            transition: opacity 0.2s;
        }

        .calendar-fade.hidden {
            opacity: 0;
        }

        .event-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            gap: 0.65rem;
            align-items: flex-start;
        }

        .event-item:last-child {
            border-bottom: none;
        }

        .event-date {
            background: #f8f8f8;
            border-radius: 6px;
            padding: 0.25rem 0.45rem;
            font-size: 0.65rem;
            font-weight: 600;
            white-space: nowrap;
            min-width: 48px;
            text-align: center;
            color: #555;
        }

        .calendar-cv .event-date { border-left: 3px solid var(--cv-ocean); }
        .calendar-ch .event-date { border-left: 3px solid var(--ch-red); }

        .event-info {
            flex: 1;
        }

        .event-name {
            font-weight: 600;
            font-size: 0.8rem;
        }

        .event-desc {
            font-size: 0.7rem;
            color: #999;
            margin-top: 0.1rem;
        }

        .event-past {
            opacity: 0.4;
        }

        /* ===== News & Media ===== */
        .media-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            padding: 0 1rem 1rem;
            background: #f0f0f5;
        }

        .media-panel {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            padding: 1.25rem;
        }

        .media-panel h3 {
            font-family: var(--font-display);
            font-size: 1rem;
            margin-bottom: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .media-cv h3 { color: var(--cv-ocean); }
        .media-ch h3 { color: var(--ch-mountain); }

        .media-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .media-link {
            display: flex;
            align-items: center;
            gap: 0.55rem;
            padding: 0.55rem 0.7rem;
            border-radius: 8px;
            text-decoration: none;
            color: var(--text-dark);
            background: #f8f9fa;
            border: 1px solid #eee;
            transition: all 0.15s ease;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .media-link:hover {
            background: #eef2ff;
            border-color: #c5cae9;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.06);
        }

        .media-link .media-icon {
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .media-link .media-info {
            display: flex;
            flex-direction: column;
            min-width: 0;
        }

        .media-link .media-name {
            font-weight: 600;
            font-size: 0.78rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .media-link .media-type {
            font-size: 0.6rem;
            color: #999;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ===== Neuroscience Tip ===== */
        .neuro-section {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            padding: 2rem 1.5rem;
            text-align: center;
        }

        .neuro-section h2 {
            font-family: var(--font-display);
            font-size: 1.3rem;
            margin-bottom: 0.25rem;
        }

        .neuro-category {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--bridge-gold);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .neuro-tip {
            max-width: 600px;
            margin: 0 auto;
            font-size: 1rem;
            line-height: 1.7;
            font-weight: 300;
        }

        .neuro-emoji {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            display: block;
        }

        .neuro-source {
            font-size: 0.7rem;
            opacity: 0.5;
            margin-top: 1rem;
        }

        /* ===== Footer ===== */
        .bridge-footer {
            background: var(--text-dark);
            color: rgba(255,255,255,0.5);
            text-align: center;
            padding: 1.25rem;
            font-size: 0.75rem;
        }

        .bridge-footer .hearts {
            color: var(--bridge-gold);
            margin: 0 0.25rem;
        }

        /* ===== Mobile Responsive ===== */
        @media (max-width: 700px) {
            .clocks-section,
            .happening-section,
            .work-hours-grid,
            .weather-section,
            .sun-section,
            .calendar-section,
            .media-section {
                grid-template-columns: 1fr;
            }

            .media-grid {
                grid-template-columns: 1fr 1fr;
            }

            .clock-panel {
                padding: 1.5rem 1rem;
                min-height: auto;
            }

            .clock-time {
                font-size: 3rem;
            }

            .happening-panel {
                padding: 1rem;
            }

            .sun-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== Animations ===== */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.5s ease-out;
        }

        /* Smooth time transition */
        .clock-time {
            transition: opacity 0.15s ease;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="bridge-header">
        <h1>Mindelo <span class="bridge-icon">üåâ</span> Lausanne</h1>
        <p class="subtitle" id="subtitle">A bridge between two homes</p>
        <div class="lang-switcher">
            <button class="lang-btn active" onclick="setLanguage('en')">EN</button>
            <button class="lang-btn" onclick="setLanguage('fr')">FR</button>
            <button class="lang-btn" onclick="setLanguage('pt')">PT</button>
        </div>
    </header>

    <!-- Time Difference -->
    <div class="time-diff-banner" id="timeDiffBanner">
        <span id="timeDiffPrefix">Lausanne is</span> <span id="timeDiff">2 hours</span> <span id="timeDiffSuffix">ahead of Mindelo</span>
    </div>

    <!-- Dual Clocks -->
    <section class="clocks-section">
        <div class="clock-panel clock-cv">
            <div class="clock-location" id="locationCv">Cabo Verde</div>
            <div class="clock-city">Mindelo</div>
            <div class="clock-flag">üá®üáª</div>
            <div class="clock-time" id="timeMindelo">--:--</div>
            <div class="clock-date" id="dateMindelo">Loading...</div>
            <div class="clock-timezone" id="tzMindelo">CVT (UTC-1)</div>
        </div>
        <div class="clock-panel clock-ch">
            <div class="clock-location" id="locationCh">Switzerland</div>
            <div class="clock-city">Lausanne</div>
            <div class="clock-flag">üá®üá≠</div>
            <div class="clock-time" id="timeLausanne">--:--</div>
            <div class="clock-date" id="dateLausanne">Loading...</div>
            <div class="clock-timezone" id="tzLausanne">CET (UTC+1)</div>
        </div>
    </section>

    <!-- What's Happening Now -->
    <section class="happening-section">
        <div class="happening-panel happening-cv">
            <div class="happening-label" id="happeningLabelCv">Right now in Mindelo</div>
            <span class="happening-emoji" id="happeningCvEmoji">‚òÄÔ∏è</span>
            <div class="happening-text" id="happeningCv">Loading...</div>
        </div>
        <div class="happening-panel happening-ch">
            <div class="happening-label" id="happeningLabelCh">Right now in Lausanne</div>
            <span class="happening-emoji" id="happeningChEmoji">üèîÔ∏è</span>
            <div class="happening-text" id="happeningCh">Loading...</div>
        </div>
    </section>

    <!-- Best Time to Call -->
    <div class="section-title">
        <h2 id="callTitle">Best Time to Call</h2>
        <p id="callSubtitle">Weekend overlap when both cities are awake</p>
    </div>

    <section class="call-section">
        <div class="call-card">
            <div class="call-status" id="callStatus">Checking overlap...</div>
            <div class="call-next" id="callNext">Loading...</div>
            <div class="work-hours-grid">
                <div class="hours-panel hours-cv">
                    <div class="hours-label" id="callHoursCvLabel">üá®üáª Mindelo call window</div>
                    <div class="hours-value" id="workHoursCv">Sat-Sun, 08:00-21:00</div>
                </div>
                <div class="hours-panel hours-ch">
                    <div class="hours-label" id="callHoursChLabel">üá®üá≠ Lausanne call window</div>
                    <div class="hours-value" id="workHoursCh">Sat-Sun, 08:00-21:00</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Weather -->
    <div class="section-title">
        <h2 id="weatherTitle">Weather Comparison</h2>
        <p id="weatherSubtitle">Live conditions in both cities</p>
    </div>

    <section class="weather-section">
        <div class="weather-panel weather-cv" id="weatherCv">
            <h3 id="weatherCvTitle">üá®üáª Mindelo Weather</h3>
            <div id="weatherCvContent">
                <div class="weather-error" id="weatherCvLoading">Loading weather data...</div>
            </div>
            <div class="weather-meta" id="weatherCvMeta">Updated: --</div>
        </div>
        <div class="weather-panel weather-ch" id="weatherCh">
            <h3 id="weatherChTitle">üá®üá≠ Lausanne Weather</h3>
            <div id="weatherChContent">
                <div class="weather-error" id="weatherChLoading">Loading weather data...</div>
            </div>
            <div class="weather-meta" id="weatherChMeta">Updated: --</div>
        </div>
    </section>

    <!-- Sunrise / Sunset -->
    <div class="section-title">
        <h2 id="sunTitle">Sunrise &amp; Day Length</h2>
        <p id="sunSubtitle">Today's sunlight in both cities</p>
    </div>

    <section class="sun-section">
        <div class="sun-panel sun-cv">
            <h3 id="sunCvTitle">üá®üáª Mindelo Sun</h3>
            <div id="sunCvContent">
                <div class="weather-error">Loading solar data...</div>
            </div>
        </div>
        <div class="sun-panel sun-ch">
            <h3 id="sunChTitle">üá®üá≠ Lausanne Sun</h3>
            <div id="sunChContent">
                <div class="weather-error">Loading solar data...</div>
            </div>
        </div>
        <div class="sun-diff" id="sunDiff">Calculating daylight difference...</div>
    </section>

    <!-- Cultural Calendar -->
    <div class="section-title">
        <h2 id="calendarTitle">Cultural Calendar</h2>
        <p id="calendarSubtitle">Upcoming holidays &amp; events</p>
    </div>

    <section class="calendar-section">
        <div class="calendar-panel calendar-cv" id="calendarCv"></div>
        <div class="calendar-panel calendar-ch" id="calendarCh"></div>
    </section>

    <!-- News & Media -->
    <div class="section-title">
        <h2 id="mediaTitle">News &amp; Media</h2>
        <p id="mediaSubtitle">Stay connected with what's happening back home</p>
    </div>

    <section class="media-section">
        <div class="media-panel media-cv">
            <h3 id="mediaCvTitle">üá®üáª Cabo Verde & Mindelo</h3>
            <div class="media-grid" id="mediaGridCv">
                <a href="https://mindelinsite.com/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∞</span>
                    <span class="media-info">
                        <span class="media-name">Mindel Insite</span>
                        <span class="media-type" data-i18n="mediaTypeSvNews">S√£o Vicente news</span>
                    </span>
                </a>
                <a href="https://www.balai.cv/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üåê</span>
                    <span class="media-info">
                        <span class="media-name">Balai</span>
                        <span class="media-type" data-i18n="mediaTypeAggregator">Aggregator</span>
                    </span>
                </a>
                <a href="https://asemana.sapo.cv/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∞</span>
                    <span class="media-info">
                        <span class="media-name">A Semana</span>
                        <span class="media-type" data-i18n="mediaTypeWeekly">Weekly newspaper</span>
                    </span>
                </a>
                <a href="https://expressodasilhas.cv/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∞</span>
                    <span class="media-info">
                        <span class="media-name">Expresso das Ilhas</span>
                        <span class="media-type" data-i18n="mediaTypeDaily">Daily newspaper</span>
                    </span>
                </a>
                <a href="https://inforpress.cv/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üèõÔ∏è</span>
                    <span class="media-info">
                        <span class="media-name">Inforpress</span>
                        <span class="media-type" data-i18n="mediaTypeAgency">News agency</span>
                    </span>
                </a>
                <a href="https://anacao.cv/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∞</span>
                    <span class="media-info">
                        <span class="media-name">A Na√ß√£o</span>
                        <span class="media-type" data-i18n="mediaTypeNewspaper">Newspaper</span>
                    </span>
                </a>
                <a href="https://santiagomagazine.cv/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üìñ</span>
                    <span class="media-info">
                        <span class="media-name">Santiago Magazine</span>
                        <span class="media-type" data-i18n="mediaTypeMagazine">Magazine</span>
                    </span>
                </a>
                <a href="https://rtc.cv/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∫</span>
                    <span class="media-info">
                        <span class="media-name">RTC (TCV)</span>
                        <span class="media-type" data-i18n="mediaTypeTvRadio">TV & Radio</span>
                    </span>
                </a>
            </div>
        </div>
        <div class="media-panel media-ch">
            <h3 id="mediaChTitle">üá®üá≠ Lausanne & Vaud</h3>
            <div class="media-grid" id="mediaGridCh">
                <a href="https://www.rts.ch/info/regions/vaud/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∫</span>
                    <span class="media-info">
                        <span class="media-name">RTS Info</span>
                        <span class="media-type" data-i18n="mediaTypePublic">Public broadcaster</span>
                    </span>
                </a>
                <a href="https://www.20min.ch/fr/suisse-romande/vaud" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∞</span>
                    <span class="media-info">
                        <span class="media-name">20 Minutes</span>
                        <span class="media-type" data-i18n="mediaTypeFreeDaily">Free daily</span>
                    </span>
                </a>
                <a href="https://www.24heures.ch/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∞</span>
                    <span class="media-info">
                        <span class="media-name">24 Heures</span>
                        <span class="media-type" data-i18n="mediaTypeVaudDaily">Vaud daily</span>
                    </span>
                </a>
                <a href="https://www.letemps.ch/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∞</span>
                    <span class="media-info">
                        <span class="media-name">Le Temps</span>
                        <span class="media-type" data-i18n="mediaTypeRomande">Suisse romande</span>
                    </span>
                </a>
                <a href="https://www.lematin.ch/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üì∞</span>
                    <span class="media-info">
                        <span class="media-name">Le Matin</span>
                        <span class="media-type" data-i18n="mediaTypeTabloid">Tabloid</span>
                    </span>
                </a>
                <a href="https://lausannecites.ch/" target="_blank" rel="noopener" class="media-link">
                    <span class="media-icon">üèòÔ∏è</span>
                    <span class="media-info">
                        <span class="media-name">Lausanne Cit√©s</span>
                        <span class="media-type" data-i18n="mediaTypeLocalWeekly">Local weekly</span>
                    </span>
                </a>
            </div>
        </div>
    </section>

    <!-- Neuroscience Tip -->
    <section class="neuro-section" id="neuroSection">
        <h2 id="neuroTitle">üß† Daily Brain Insight</h2>
        <div class="neuro-category" id="neuroCategory">Loading...</div>
        <span class="neuro-emoji" id="neuroEmoji">üß¨</span>
        <div class="neuro-tip" id="neuroTip">Loading your daily tip...</div>
        <div class="neuro-source" id="neuroSource"></div>
    </section>

    <!-- Footer -->
    <footer class="bridge-footer" id="footer">
        Mindelo ‚Üî Lausanne Time Bridge <span class="hearts">‚ô•</span> <span id="footerText">Connecting two homes across the Atlantic</span>
    </footer>

    <script>
    // ===================================================================
    //  MINDELO-LAUSANNE TIME BRIDGE - Main Application Script
    //  with i18n support for EN, FR, PT
    // ===================================================================

    (function() {
        'use strict';

        // ---- Configuration ----
        const MINDELO_TZ = 'Atlantic/Cape_Verde';  // UTC-1 year-round
        const LAUSANNE_TZ = 'Europe/Zurich';        // CET/CEST

        // ---- i18n Translations ----
        let currentLang = localStorage.getItem('timeBridgeLang') || 'en';

        const LOCALES = { en: 'en-GB', fr: 'fr-FR', pt: 'pt-PT' };

        const T = {
            // ---- Header & structure ----
            subtitle:           { en: 'A bridge between two homes', fr: 'Un pont entre deux maisons', pt: 'Uma ponte entre duas casas' },
            timeDiffPrefix:     { en: 'Lausanne is', fr: 'Lausanne a', pt: 'Lausanne est√°' },
            timeDiffSuffix:     { en: 'ahead of Mindelo', fr: "d'avance sur Mindelo", pt: '√† frente de Mindelo' },
            hour:               { en: 'hour', fr: 'heure', pt: 'hora' },
            hours:              { en: 'hours', fr: 'heures', pt: 'horas' },
            locationCv:         { en: 'Cabo Verde', fr: 'Cabo Verde', pt: 'Cabo Verde' },
            locationCh:         { en: 'Switzerland', fr: 'Suisse', pt: 'Su√≠√ßa' },

            // ---- Happening labels ----
            happeningLabelCv:   { en: 'Right now in Mindelo', fr: 'En ce moment √† Mindelo', pt: 'Neste momento em Mindelo' },
            happeningLabelCh:   { en: 'Right now in Lausanne', fr: 'En ce moment √† Lausanne', pt: 'Neste momento em Lausanne' },

            // ---- Best time to call ----
            callTitle:          { en: 'Best Time to Call', fr: 'Meilleur moment pour appeler', pt: 'Melhor hor√°rio para ligar' },
            callSubtitle:       { en: 'Weekend overlap when both cities are awake', fr: "Chevauchement du week-end quand les deux villes sont r√©veill√©es", pt: 'Sobreposi√ß√£o no fim de semana quando as duas cidades est√£o acordadas' },
            callHoursCvLabel:   { en: 'üá®üáª Mindelo call window', fr: "üá®üáª Fen√™tre d'appel √† Mindelo", pt: 'üá®üáª Janela para ligar em Mindelo' },
            callHoursChLabel:   { en: 'üá®üá≠ Lausanne call window', fr: "üá®üá≠ Fen√™tre d'appel √† Lausanne", pt: 'üá®üá≠ Janela para ligar em Lausanne' },
            callHoursCvValue:   { en: 'Sat-Sun, 08:00-21:00', fr: 'Sam-Dim, 08:00-21:00', pt: 'S√°b-Dom, 08:00-21:00' },
            callHoursChValue:   { en: 'Sat-Sun, 08:00-21:00', fr: 'Sam-Dim, 08:00-21:00', pt: 'S√°b-Dom, 08:00-21:00' },
            callStatusNow:      { en: 'Good moment to call now', fr: 'Bon moment pour appeler maintenant', pt: 'Bom momento para ligar agora' },
            callStatusLater:    { en: 'Next overlap window', fr: 'Prochaine fen√™tre commune', pt: 'Pr√≥xima janela em comum' },
            callStatusNone:     { en: 'No overlap in the next 7 days', fr: 'Aucun chevauchement dans les 7 prochains jours', pt: 'Sem sobreposi√ß√£o nos pr√≥ximos 7 dias' },
            callUntil:          { en: 'Until', fr: "Jusqu'√†", pt: 'At√©' },
            callNoWindow:       { en: 'Check next weekend', fr: 'V√©rifiez le week-end prochain', pt: 'Verifique no pr√≥ximo fim de semana' },
            callWindowPrefix:   { en: 'Lausanne', fr: 'Lausanne', pt: 'Lausanne' },
            callWindowSuffix:   { en: 'Mindelo', fr: 'Mindelo', pt: 'Mindelo' },

            // ---- Weather ----
            weatherTitle:       { en: 'Weather Comparison', fr: 'Comparaison m√©t√©o', pt: 'Compara√ß√£o meteorol√≥gica' },
            weatherSubtitle:    { en: 'Live conditions in both cities', fr: 'Conditions en direct dans les deux villes', pt: 'Condi√ß√µes em tempo real nas duas cidades' },
            weatherCvTitle:     { en: 'üá®üáª Mindelo Weather', fr: 'üá®üáª M√©t√©o Mindelo', pt: 'üá®üáª Tempo em Mindelo' },
            weatherChTitle:     { en: 'üá®üá≠ Lausanne Weather', fr: 'üá®üá≠ M√©t√©o Lausanne', pt: 'üá®üá≠ Tempo em Lausanne' },
            weatherLoading:     { en: 'Loading weather data...', fr: 'Chargement des donn√©es m√©t√©o...', pt: 'A carregar dados meteorol√≥gicos...' },
            weatherUnavailable: { en: 'Weather unavailable', fr: 'M√©t√©o indisponible', pt: 'Tempo indispon√≠vel' },
            weatherFetchError:  { en: 'Could not fetch weather data', fr: 'Impossible de r√©cup√©rer la m√©t√©o', pt: 'N√£o foi poss√≠vel obter dados meteorol√≥gicos' },
            feelsLike:          { en: 'Feels', fr: 'Ressenti', pt: 'Sensa√ß√£o' },
            updatedLabel:       { en: 'Updated', fr: 'Mis √† jour', pt: 'Atualizado' },
            updatedJustNow:     { en: 'just now', fr: "√† l'instant", pt: 'agora mesmo' },
            minute:             { en: 'min', fr: 'min', pt: 'min' },
            minutes:            { en: 'min', fr: 'min', pt: 'min' },
            ago:                { en: 'ago', fr: '', pt: 'atr√°s' },
            usingCachedData:    { en: 'using cached data', fr: 'donn√©es en cache', pt: 'usando dados em cache' },
            offlineMode:        { en: 'offline mode', fr: 'mode hors ligne', pt: 'modo offline' },
            weatherNoData:      { en: 'No live or cached weather data', fr: 'Aucune donn√©e m√©t√©o en direct ou en cache', pt: 'Sem dados meteorol√≥gicos ao vivo ou em cache' },
            sunTitle:           { en: 'Sunrise & Day Length', fr: 'Lever du soleil & dur√©e du jour', pt: 'Nascer do sol e dura√ß√£o do dia' },
            sunSubtitle:        { en: "Today's sunlight in both cities", fr: "Ensoleillement d'aujourd'hui dans les deux villes", pt: 'Luz solar de hoje nas duas cidades' },
            sunCvTitle:         { en: 'üá®üáª Mindelo Sun', fr: 'üá®üáª Soleil √† Mindelo', pt: 'üá®üáª Sol em Mindelo' },
            sunChTitle:         { en: 'üá®üá≠ Lausanne Sun', fr: 'üá®üá≠ Soleil √† Lausanne', pt: 'üá®üá≠ Sol em Lausanne' },
            sunrise:            { en: 'Sunrise', fr: 'Lever', pt: 'Nascer' },
            sunset:             { en: 'Sunset', fr: 'Coucher', pt: 'P√¥r do sol' },
            dayLength:          { en: 'Day Length', fr: 'Dur√©e du jour', pt: 'Dura√ß√£o do dia' },
            daylightDiffPrefix: { en: 'Daylight difference', fr: 'Diff√©rence de lumi√®re', pt: 'Diferen√ßa de luz do dia' },
            daylightLongerIn:   { en: 'longer in', fr: 'plus long √†', pt: 'mais longo em' },
            daylightSame:       { en: 'Same day length in both cities today', fr: 'M√™me dur√©e du jour dans les deux villes aujourd‚Äôhui', pt: 'Mesma dura√ß√£o do dia nas duas cidades hoje' },
            cityMindelo:        { en: 'Mindelo', fr: 'Mindelo', pt: 'Mindelo' },
            cityLausanne:       { en: 'Lausanne', fr: 'Lausanne', pt: 'Lausanne' },
            sunDataUnavailable: { en: 'Solar data unavailable', fr: 'Donn√©es solaires indisponibles', pt: 'Dados solares indispon√≠veis' },

            // ---- Calendar ----
            calendarTitle:      { en: 'Cultural Calendar', fr: 'Calendrier culturel', pt: 'Calend√°rio cultural' },
            calendarSubtitle:   { en: 'Upcoming holidays & events', fr: 'F√™tes & √©v√©nements √† venir', pt: 'Feriados e eventos futuros' },
            calendarCvTitle:    { en: 'Cabo Verde & Mindelo', fr: 'Cabo Verde & Mindelo', pt: 'Cabo Verde & Mindelo' },
            calendarChTitle:    { en: 'Lausanne & Vaud', fr: 'Lausanne & Vaud', pt: 'Lausanne & Vaud' },
            nextUp:             { en: 'Next up', fr: 'Prochain', pt: 'Pr√≥ximo' },
            events:             { en: 'events', fr: '√©v√©nements', pt: 'eventos' },

            // ---- Media ----
            mediaTitle:         { en: 'News & Media', fr: 'Actualit√©s & M√©dias', pt: 'Not√≠cias e Media' },
            mediaSubtitle:      { en: "Stay connected with what's happening back home", fr: 'Restez connect√© √† ce qui se passe chez vous', pt: 'Mantenha-se ligado ao que acontece em casa' },
            mediaCvTitle:       { en: 'üá®üáª Cabo Verde & Mindelo', fr: 'üá®üáª Cabo Verde & Mindelo', pt: 'üá®üáª Cabo Verde & Mindelo' },
            mediaChTitle:       { en: 'üá®üá≠ Lausanne & Vaud', fr: 'üá®üá≠ Lausanne & Vaud', pt: 'üá®üá≠ Lausanne & Vaud' },
            // Media type labels
            mediaTypeSvNews:    { en: 'S√£o Vicente news', fr: 'Actualit√©s S√£o Vicente', pt: 'Not√≠cias S√£o Vicente' },
            mediaTypeAggregator:{ en: 'Aggregator', fr: 'Agr√©gateur', pt: 'Agregador' },
            mediaTypeWeekly:    { en: 'Weekly newspaper', fr: 'Hebdomadaire', pt: 'Seman√°rio' },
            mediaTypeDaily:     { en: 'Daily newspaper', fr: 'Quotidien', pt: 'Di√°rio' },
            mediaTypeAgency:    { en: 'News agency', fr: "Agence de presse", pt: 'Ag√™ncia de not√≠cias' },
            mediaTypeNewspaper: { en: 'Newspaper', fr: 'Journal', pt: 'Jornal' },
            mediaTypeMagazine:  { en: 'Magazine', fr: 'Magazine', pt: 'Revista' },
            mediaTypeTvRadio:   { en: 'TV & Radio', fr: 'TV & Radio', pt: 'TV & R√°dio' },
            mediaTypePublic:    { en: 'Public broadcaster', fr: 'Service public', pt: 'Servi√ßo p√∫blico' },
            mediaTypeFreeDaily: { en: 'Free daily', fr: 'Gratuit quotidien', pt: 'Di√°rio gratuito' },
            mediaTypeVaudDaily: { en: 'Vaud daily', fr: 'Quotidien vaudois', pt: 'Di√°rio de Vaud' },
            mediaTypeRomande:   { en: 'Suisse romande', fr: 'Suisse romande', pt: 'Su√≠√ßa romanda' },
            mediaTypeTabloid:   { en: 'Tabloid', fr: 'Tablo√Ød', pt: 'Tabl√≥ide' },
            mediaTypeLocalWeekly:{ en: 'Local weekly', fr: 'Hebdomadaire local', pt: 'Seman√°rio local' },

            // ---- Neuro ----
            neuroTitle:         { en: 'üß† Daily Brain Insight', fr: 'üß† Astuce c√©r√©brale du jour', pt: 'üß† Curiosidade cerebral do dia' },

            // ---- Footer ----
            footerText:         { en: 'Connecting two homes across the Atlantic', fr: "Connecter deux foyers √† travers l'Atlantique", pt: 'A ligar duas casas atrav√©s do Atl√¢ntico' },

            // ---- WMO Weather descriptions ----
            wmo0:  { en: 'Clear sky', fr: 'Ciel d√©gag√©', pt: 'C√©u limpo' },
            wmo1:  { en: 'Mainly clear', fr: 'Principalement d√©gag√©', pt: 'Predominantemente limpo' },
            wmo2:  { en: 'Partly cloudy', fr: 'Partiellement nuageux', pt: 'Parcialmente nublado' },
            wmo3:  { en: 'Overcast', fr: 'Couvert', pt: 'Encoberto' },
            wmo45: { en: 'Fog', fr: 'Brouillard', pt: 'Nevoeiro' },
            wmo48: { en: 'Depositing rime fog', fr: 'Brouillard givrant', pt: 'Nevoeiro com geada' },
            wmo51: { en: 'Light drizzle', fr: 'Bruine l√©g√®re', pt: 'Chuviscos leves' },
            wmo53: { en: 'Moderate drizzle', fr: 'Bruine mod√©r√©e', pt: 'Chuviscos moderados' },
            wmo55: { en: 'Dense drizzle', fr: 'Bruine dense', pt: 'Chuviscos intensos' },
            wmo61: { en: 'Slight rain', fr: 'Pluie l√©g√®re', pt: 'Chuva fraca' },
            wmo63: { en: 'Moderate rain', fr: 'Pluie mod√©r√©e', pt: 'Chuva moderada' },
            wmo65: { en: 'Heavy rain', fr: 'Pluie forte', pt: 'Chuva forte' },
            wmo71: { en: 'Slight snow', fr: 'Neige l√©g√®re', pt: 'Neve fraca' },
            wmo73: { en: 'Moderate snow', fr: 'Neige mod√©r√©e', pt: 'Neve moderada' },
            wmo75: { en: 'Heavy snow', fr: 'Neige forte', pt: 'Neve forte' },
            wmo77: { en: 'Snow grains', fr: 'Grains de neige', pt: 'Gr√£os de neve' },
            wmo80: { en: 'Slight showers', fr: 'Averses l√©g√®res', pt: 'Aguaceiros fracos' },
            wmo81: { en: 'Moderate showers', fr: 'Averses mod√©r√©es', pt: 'Aguaceiros moderados' },
            wmo82: { en: 'Violent showers', fr: 'Averses violentes', pt: 'Aguaceiros fortes' },
            wmo85: { en: 'Slight snow showers', fr: 'Averses de neige l√©g√®res', pt: 'Aguaceiros de neve fracos' },
            wmo86: { en: 'Heavy snow showers', fr: 'Averses de neige fortes', pt: 'Aguaceiros de neve fortes' },
            wmo95: { en: 'Thunderstorm', fr: 'Orage', pt: 'Trovoada' },
            wmo96: { en: 'Thunderstorm with slight hail', fr: 'Orage avec gr√™le l√©g√®re', pt: 'Trovoada com granizo fraco' },
            wmo99: { en: 'Thunderstorm with heavy hail', fr: 'Orage avec forte gr√™le', pt: 'Trovoada com granizo forte' },
        };

        // ---- "What's Happening" texts per language ----
        const happeningCV = {
            en: [
                { start: 0, end: 5, emoji: 'üåô', text: 'Mindelo is sleeping under the Atlantic stars' },
                { start: 5, end: 7, emoji: 'üåÖ', text: 'Early risers in Mindelo are watching the sunrise over the bay' },
                { start: 7, end: 9, emoji: '‚òï', text: 'Mindelo is waking up ‚Äî coffee and fresh bread at the padaria' },
                { start: 9, end: 11, emoji: 'üè™', text: 'The Mercado Municipal is buzzing with fresh fish and produce' },
                { start: 11, end: 12, emoji: 'üéµ', text: 'Morna music drifts through the streets of Mindelo' },
                { start: 12, end: 14, emoji: 'üçΩÔ∏è', text: 'Your family in Mindelo is having lunch ‚Äî cachupa is on the table' },
                { start: 14, end: 16, emoji: 'üåä', text: 'Afternoon in Mindelo ‚Äî perfect time for a walk along Laginha beach' },
                { start: 16, end: 18, emoji: '‚öΩ', text: 'Kids are playing football on the streets of Mindelo' },
                { start: 18, end: 19, emoji: 'üåá', text: 'Golden hour in Mindelo ‚Äî the bay glows with warm light' },
                { start: 19, end: 20, emoji: 'üç∑', text: 'Grogue time ‚Äî Mindelo is settling into the evening' },
                { start: 20, end: 21, emoji: 'üé∂', text: 'Live music fills the bars along Rua de Lisboa' },
                { start: 21, end: 23, emoji: 'üåÉ', text: "Mindelo nightlife is coming alive ‚Äî the city of Ces√°ria √âvora never sleeps early" },
                { start: 23, end: 24, emoji: 'üåô', text: 'Late night in Mindelo ‚Äî the Atlantic breeze cools the city' }
            ],
            fr: [
                { start: 0, end: 5, emoji: 'üåô', text: 'Mindelo dort sous les √©toiles de l\'Atlantique' },
                { start: 5, end: 7, emoji: 'üåÖ', text: 'Les l√®ve-t√¥t de Mindelo regardent le lever du soleil sur la baie' },
                { start: 7, end: 9, emoji: '‚òï', text: 'Mindelo se r√©veille ‚Äî caf√© et pain frais √† la padaria' },
                { start: 9, end: 11, emoji: 'üè™', text: 'Le Mercado Municipal est anim√© ‚Äî poissons frais et l√©gumes' },
                { start: 11, end: 12, emoji: 'üéµ', text: 'La morna r√©sonne dans les rues de Mindelo' },
                { start: 12, end: 14, emoji: 'üçΩÔ∏è', text: 'Votre famille √† Mindelo d√©jeune ‚Äî la cachupa est sur la table' },
                { start: 14, end: 16, emoji: 'üåä', text: 'Apr√®s-midi √† Mindelo ‚Äî parfait pour une promenade sur la plage de Laginha' },
                { start: 16, end: 18, emoji: '‚öΩ', text: 'Les enfants jouent au football dans les rues de Mindelo' },
                { start: 18, end: 19, emoji: 'üåá', text: 'Heure dor√©e √† Mindelo ‚Äî la baie brille de lumi√®re chaude' },
                { start: 19, end: 20, emoji: 'üç∑', text: 'L\'heure du grogue ‚Äî Mindelo s\'installe dans la soir√©e' },
                { start: 20, end: 21, emoji: 'üé∂', text: 'La musique live remplit les bars de la Rua de Lisboa' },
                { start: 21, end: 23, emoji: 'üåÉ', text: 'La vie nocturne de Mindelo s\'anime ‚Äî la ville de Ces√°ria √âvora ne dort jamais t√¥t' },
                { start: 23, end: 24, emoji: 'üåô', text: 'Nuit tardive √† Mindelo ‚Äî la brise atlantique rafra√Æchit la ville' }
            ],
            pt: [
                { start: 0, end: 5, emoji: 'üåô', text: 'Mindelo dorme sob as estrelas do Atl√¢ntico' },
                { start: 5, end: 7, emoji: 'üåÖ', text: 'Os madrugadores de Mindelo observam o nascer do sol sobre a ba√≠a' },
                { start: 7, end: 9, emoji: '‚òï', text: 'Mindelo acorda ‚Äî caf√© e p√£o fresco na padaria' },
                { start: 9, end: 11, emoji: 'üè™', text: 'O Mercado Municipal est√° animado ‚Äî peixe fresco e produtos da terra' },
                { start: 11, end: 12, emoji: 'üéµ', text: 'A morna flui pelas ruas de Mindelo' },
                { start: 12, end: 14, emoji: 'üçΩÔ∏è', text: 'A sua fam√≠lia em Mindelo est√° a almo√ßar ‚Äî cachupa na mesa' },
                { start: 14, end: 16, emoji: 'üåä', text: 'Tarde em Mindelo ‚Äî perfeito para um passeio pela praia de Laginha' },
                { start: 16, end: 18, emoji: '‚öΩ', text: 'Os mi√∫dos jogam futebol nas ruas de Mindelo' },
                { start: 18, end: 19, emoji: 'üåá', text: 'Hora dourada em Mindelo ‚Äî a ba√≠a brilha com luz quente' },
                { start: 19, end: 20, emoji: 'üç∑', text: 'Hora do grogue ‚Äî Mindelo entra pela noite' },
                { start: 20, end: 21, emoji: 'üé∂', text: 'M√∫sica ao vivo enche os bares da Rua de Lisboa' },
                { start: 21, end: 23, emoji: 'üåÉ', text: 'A vida nocturna de Mindelo ganha vida ‚Äî a cidade de Ces√°ria √âvora nunca dorme cedo' },
                { start: 23, end: 24, emoji: 'üåô', text: 'Noite avan√ßada em Mindelo ‚Äî a brisa atl√¢ntica refresca a cidade' }
            ]
        };

        const happeningCH = {
            en: [
                { start: 0, end: 5, emoji: 'üåô', text: 'Lausanne is asleep ‚Äî the Alps stand guard in the moonlight' },
                { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'Dawn breaks over Lake Geneva and the Alpine peaks' },
                { start: 7, end: 9, emoji: 'ü•ê', text: 'Lausanne is having breakfast ‚Äî croissants and caf√© au lait' },
                { start: 9, end: 11, emoji: 'üíº', text: 'The workday is underway in Lausanne ‚Äî EPFL buzzes with ideas' },
                { start: 11, end: 12, emoji: 'üìö', text: 'Mid-morning in Lausanne ‚Äî labs and lectures in full swing' },
                { start: 12, end: 13, emoji: 'üßÄ', text: 'Lunch break in Lausanne ‚Äî fondue or a lakeside sandwich' },
                { start: 13, end: 15, emoji: 'üè¢', text: 'Afternoon productivity in Lausanne ‚Äî the Swiss clockwork keeps ticking' },
                { start: 15, end: 16, emoji: '‚òï', text: 'Coffee break in Lausanne ‚Äî time for a quick espresso' },
                { start: 16, end: 18, emoji: 'üö∂', text: 'Lausanne winds down ‚Äî people stroll along the Ouchy waterfront' },
                { start: 18, end: 19, emoji: 'üè†', text: 'Heading home in Lausanne ‚Äî the M√©tro carries commuters uphill' },
                { start: 19, end: 21, emoji: 'üç∑', text: 'Lausanne is winding down for the evening ‚Äî dinner time with Swiss wine' },
                { start: 21, end: 22, emoji: 'üìñ', text: 'Quiet evening in Lausanne ‚Äî reading by the window with lake views' },
                { start: 22, end: 24, emoji: 'üåô', text: 'Lausanne is settling in for the night ‚Äî bonne nuit!' }
            ],
            fr: [
                { start: 0, end: 5, emoji: 'üåô', text: 'Lausanne dort ‚Äî les Alpes veillent au clair de lune' },
                { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'L\'aube se l√®ve sur le lac L√©man et les sommets alpins' },
                { start: 7, end: 9, emoji: 'ü•ê', text: 'Lausanne prend le petit-d√©jeuner ‚Äî croissants et caf√© au lait' },
                { start: 9, end: 11, emoji: 'üíº', text: 'La journ√©e de travail bat son plein √† Lausanne ‚Äî l\'EPFL bouillonne d\'id√©es' },
                { start: 11, end: 12, emoji: 'üìö', text: 'Mi-matin√©e √† Lausanne ‚Äî labos et cours √† plein r√©gime' },
                { start: 12, end: 13, emoji: 'üßÄ', text: 'Pause d√©jeuner √† Lausanne ‚Äî fondue ou sandwich au bord du lac' },
                { start: 13, end: 15, emoji: 'üè¢', text: 'Productivit√© de l\'apr√®s-midi √† Lausanne ‚Äî la m√©canique suisse tourne' },
                { start: 15, end: 16, emoji: '‚òï', text: 'Pause caf√© √† Lausanne ‚Äî un petit espresso' },
                { start: 16, end: 18, emoji: 'üö∂', text: 'Lausanne ralentit ‚Äî les gens se prom√®nent le long du quai d\'Ouchy' },
                { start: 18, end: 19, emoji: 'üè†', text: 'Retour √† la maison √† Lausanne ‚Äî le M√©tro remonte les pendulaires' },
                { start: 19, end: 21, emoji: 'üç∑', text: 'Lausanne se d√©tend ‚Äî l\'heure du d√Æner avec un vin suisse' },
                { start: 21, end: 22, emoji: 'üìñ', text: 'Soir√©e tranquille √† Lausanne ‚Äî lecture avec vue sur le lac' },
                { start: 22, end: 24, emoji: 'üåô', text: 'Lausanne s\'endort ‚Äî bonne nuit !' }
            ],
            pt: [
                { start: 0, end: 5, emoji: 'üåô', text: 'Lausanne dorme ‚Äî os Alpes vigiam ao luar' },
                { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'A aurora nasce sobre o Lago L√©man e os picos alpinos' },
                { start: 7, end: 9, emoji: 'ü•ê', text: 'Lausanne toma o pequeno-almo√ßo ‚Äî croissants e caf√© com leite' },
                { start: 9, end: 11, emoji: 'üíº', text: 'O dia de trabalho arranca em Lausanne ‚Äî a EPFL fervilha de ideias' },
                { start: 11, end: 12, emoji: 'üìö', text: 'Meio da manh√£ em Lausanne ‚Äî laborat√≥rios e aulas a todo o vapor' },
                { start: 12, end: 13, emoji: 'üßÄ', text: 'Pausa para almo√ßo em Lausanne ‚Äî fondue ou sandu√≠che √† beira do lago' },
                { start: 13, end: 15, emoji: 'üè¢', text: 'Tarde produtiva em Lausanne ‚Äî o mecanismo su√≠√ßo continua a funcionar' },
                { start: 15, end: 16, emoji: '‚òï', text: 'Pausa para caf√© em Lausanne ‚Äî hora de um espresso r√°pido' },
                { start: 16, end: 18, emoji: 'üö∂', text: 'Lausanne abranda ‚Äî as pessoas passeiam pelo cais de Ouchy' },
                { start: 18, end: 19, emoji: 'üè†', text: 'A caminho de casa em Lausanne ‚Äî o M√©tro leva os pendulares colina acima' },
                { start: 19, end: 21, emoji: 'üç∑', text: 'Lausanne relaxa ao fim do dia ‚Äî hora de jantar com vinho su√≠√ßo' },
                { start: 21, end: 22, emoji: 'üìñ', text: 'Noite tranquila em Lausanne ‚Äî leitura com vista para o lago' },
                { start: 22, end: 24, emoji: 'üåô', text: 'Lausanne adormece ‚Äî bonne nuit!' }
            ]
        };

        const happeningCVWeekend = {
            sat: {
                en: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'Saturday night in Mindelo is still quiet under Atlantic stars' },
                    { start: 5, end: 7, emoji: 'üåÖ', text: 'Early Saturday sunrise over Mindelo bay' },
                    { start: 7, end: 9, emoji: '‚òï', text: 'Slow Saturday breakfast in Mindelo ‚Äî coffee and fresh bread' },
                    { start: 9, end: 11, emoji: 'üõçÔ∏è', text: 'Saturday groceries at Mercado Municipal ‚Äî fish, fruit, and vegetables' },
                    { start: 11, end: 12, emoji: 'üß∫', text: 'Weekend errands around Mindelo before lunch' },
                    { start: 12, end: 14, emoji: 'üçΩÔ∏è', text: 'Saturday family lunch in Mindelo ‚Äî long table, no rush' },
                    { start: 14, end: 16, emoji: 'üèñÔ∏è', text: 'Beach time in Mindelo ‚Äî Laginha is lively' },
                    { start: 16, end: 18, emoji: 'üåä', text: 'Late afternoon by the sea in Mindelo with friends and family' },
                    { start: 18, end: 19, emoji: 'üåá', text: 'Saturday golden hour paints the bay in warm colors' },
                    { start: 19, end: 20, emoji: 'üç¢', text: 'Weekend dinner plans start in Mindelo' },
                    { start: 20, end: 21, emoji: 'üé∂', text: 'Live music and weekend energy in Mindelo' },
                    { start: 21, end: 23, emoji: 'üåÉ', text: 'Saturday night in Mindelo is in full swing' },
                    { start: 23, end: 24, emoji: 'üåô', text: 'Late Saturday breeze cools Mindelo' }
                ],
                fr: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'La nuit de samedi √† Mindelo reste calme sous les √©toiles atlantiques' },
                    { start: 5, end: 7, emoji: 'üåÖ', text: 'Lever de soleil du samedi sur la baie de Mindelo' },
                    { start: 7, end: 9, emoji: '‚òï', text: 'Petit-d√©jeuner tranquille du samedi √† Mindelo ‚Äî caf√© et pain frais' },
                    { start: 9, end: 11, emoji: 'üõçÔ∏è', text: 'Courses du samedi au Mercado Municipal ‚Äî poisson, fruits et l√©gumes' },
                    { start: 11, end: 12, emoji: 'üß∫', text: 'Petites courses de week-end √† Mindelo avant le d√©jeuner' },
                    { start: 12, end: 14, emoji: 'üçΩÔ∏è', text: 'D√©jeuner familial du samedi √† Mindelo ‚Äî on prend le temps' },
                    { start: 14, end: 16, emoji: 'üèñÔ∏è', text: 'Direction la plage √† Mindelo ‚Äî Laginha est anim√©e' },
                    { start: 16, end: 18, emoji: 'üåä', text: 'Fin d‚Äôapr√®s-midi au bord de la mer √† Mindelo en famille' },
                    { start: 18, end: 19, emoji: 'üåá', text: 'Heure dor√©e du samedi sur la baie de Mindelo' },
                    { start: 19, end: 20, emoji: 'üç¢', text: 'Les plans du d√Æner de week-end commencent √† Mindelo' },
                    { start: 20, end: 21, emoji: 'üé∂', text: 'Musique live et ambiance de week-end √† Mindelo' },
                    { start: 21, end: 23, emoji: 'üåÉ', text: 'La nuit de samedi bat son plein √† Mindelo' },
                    { start: 23, end: 24, emoji: 'üåô', text: 'La brise tardive du samedi rafra√Æchit Mindelo' }
                ],
                pt: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'A noite de s√°bado em Mindelo ainda est√° calma sob as estrelas do Atl√¢ntico' },
                    { start: 5, end: 7, emoji: 'üåÖ', text: 'Nascer do sol de s√°bado sobre a ba√≠a de Mindelo' },
                    { start: 7, end: 9, emoji: '‚òï', text: 'Pequeno-almo√ßo de s√°bado sem pressa em Mindelo ‚Äî caf√© e p√£o fresco' },
                    { start: 9, end: 11, emoji: 'üõçÔ∏è', text: 'Compras de s√°bado no Mercado Municipal ‚Äî peixe, fruta e legumes' },
                    { start: 11, end: 12, emoji: 'üß∫', text: 'Pequenas tarefas de fim de semana em Mindelo antes do almo√ßo' },
                    { start: 12, end: 14, emoji: 'üçΩÔ∏è', text: 'Almo√ßo de s√°bado em fam√≠lia em Mindelo ‚Äî sem pressa' },
                    { start: 14, end: 16, emoji: 'üèñÔ∏è', text: 'Hora de praia em Mindelo ‚Äî Laginha est√° cheia de vida' },
                    { start: 16, end: 18, emoji: 'üåä', text: 'Fim de tarde √† beira-mar em Mindelo com fam√≠lia e amigos' },
                    { start: 18, end: 19, emoji: 'üåá', text: 'Hora dourada de s√°bado pinta a ba√≠a de Mindelo' },
                    { start: 19, end: 20, emoji: 'üç¢', text: 'Come√ßam os planos de jantar de fim de semana em Mindelo' },
                    { start: 20, end: 21, emoji: 'üé∂', text: 'M√∫sica ao vivo e energia de s√°bado em Mindelo' },
                    { start: 21, end: 23, emoji: 'üåÉ', text: 'A noite de s√°bado em Mindelo est√° no auge' },
                    { start: 23, end: 24, emoji: 'üåô', text: 'A brisa tardia de s√°bado refresca Mindelo' }
                ]
            },
            sun: {
                en: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'Sunday night is calm in Mindelo before a beach day' },
                    { start: 5, end: 7, emoji: 'üåÖ', text: 'Sunday sunrise in Mindelo ‚Äî perfect beach weather ahead' },
                    { start: 7, end: 9, emoji: 'ü•ñ', text: 'Easy Sunday morning in Mindelo ‚Äî bakery stop and coffee' },
                    { start: 9, end: 11, emoji: 'üèñÔ∏è', text: 'Families are heading to the beach in Mindelo' },
                    { start: 11, end: 12, emoji: 'üå¥', text: 'Beach umbrellas and ocean breeze across Mindelo' },
                    { start: 12, end: 14, emoji: 'üçâ', text: 'Sunday beach lunch in Mindelo ‚Äî relaxed and sunny' },
                    { start: 14, end: 16, emoji: 'üåä', text: 'Peak beach time in Mindelo ‚Äî swimming and long chats' },
                    { start: 16, end: 18, emoji: 'üèê', text: 'Late Sunday games and walks by the sea in Mindelo' },
                    { start: 18, end: 19, emoji: 'üåá', text: 'Sunset glow over a beach-filled Sunday in Mindelo' },
                    { start: 19, end: 20, emoji: 'üç≤', text: 'Sunday dinner in Mindelo after a full day at the beach' },
                    { start: 20, end: 21, emoji: 'üéµ', text: 'Calm Sunday evening music in Mindelo' },
                    { start: 21, end: 23, emoji: 'üåÉ', text: 'Mindelo slows down on Sunday night' },
                    { start: 23, end: 24, emoji: 'üåô', text: 'Quiet Sunday late night in Mindelo' }
                ],
                fr: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'La nuit de dimanche est calme √† Mindelo avant la journ√©e plage' },
                    { start: 5, end: 7, emoji: 'üåÖ', text: 'Lever du soleil dominical √† Mindelo ‚Äî m√©t√©o parfaite pour la plage' },
                    { start: 7, end: 9, emoji: 'ü•ñ', text: 'Dimanche matin tranquille √† Mindelo ‚Äî boulangerie et caf√©' },
                    { start: 9, end: 11, emoji: 'üèñÔ∏è', text: 'Les familles partent √† la plage √† Mindelo' },
                    { start: 11, end: 12, emoji: 'üå¥', text: 'Parasol et brise marine partout √† Mindelo' },
                    { start: 12, end: 14, emoji: 'üçâ', text: 'D√©jeuner du dimanche √† la plage √† Mindelo ‚Äî d√©tendu et ensoleill√©' },
                    { start: 14, end: 16, emoji: 'üåä', text: 'Plein temps plage √† Mindelo ‚Äî baignade et longues discussions' },
                    { start: 16, end: 18, emoji: 'üèê', text: 'Fin d‚Äôapr√®s-midi du dimanche entre jeux et balade en bord de mer √† Mindelo' },
                    { start: 18, end: 19, emoji: 'üåá', text: 'Coucher de soleil sur un dimanche plage √† Mindelo' },
                    { start: 19, end: 20, emoji: 'üç≤', text: 'D√Æner du dimanche √† Mindelo apr√®s la plage' },
                    { start: 20, end: 21, emoji: 'üéµ', text: 'Musique douce du dimanche soir √† Mindelo' },
                    { start: 21, end: 23, emoji: 'üåÉ', text: 'Mindelo ralentit le dimanche soir' },
                    { start: 23, end: 24, emoji: 'üåô', text: 'Fin de nuit dominicale paisible √† Mindelo' }
                ],
                pt: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'A noite de domingo √© calma em Mindelo antes do dia de praia' },
                    { start: 5, end: 7, emoji: 'üåÖ', text: 'Nascer do sol de domingo em Mindelo ‚Äî dia perfeito para a praia' },
                    { start: 7, end: 9, emoji: 'ü•ñ', text: 'Domingo de manh√£ tranquilo em Mindelo ‚Äî padaria e caf√©' },
                    { start: 9, end: 11, emoji: 'üèñÔ∏è', text: 'As fam√≠lias seguem para a praia em Mindelo' },
                    { start: 11, end: 12, emoji: 'üå¥', text: 'Sombrinhas e brisa do mar por todo o Mindelo' },
                    { start: 12, end: 14, emoji: 'üçâ', text: 'Almo√ßo de domingo na praia em Mindelo ‚Äî relaxado e com sol' },
                    { start: 14, end: 16, emoji: 'üåä', text: 'Hora alta de praia em Mindelo ‚Äî mergulhos e conversa longa' },
                    { start: 16, end: 18, emoji: 'üèê', text: 'Fim de tarde de domingo com jogos e passeios √† beira-mar em Mindelo' },
                    { start: 18, end: 19, emoji: 'üåá', text: 'P√¥r do sol sobre um domingo de praia em Mindelo' },
                    { start: 19, end: 20, emoji: 'üç≤', text: 'Jantar de domingo em Mindelo depois de um dia inteiro de praia' },
                    { start: 20, end: 21, emoji: 'üéµ', text: 'M√∫sica calma no domingo √† noite em Mindelo' },
                    { start: 21, end: 23, emoji: 'üåÉ', text: 'Mindelo abranda na noite de domingo' },
                    { start: 23, end: 24, emoji: 'üåô', text: 'Fim de noite de domingo tranquilo em Mindelo' }
                ]
            }
        };

        const happeningCHWeekend = {
            sat: {
                en: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'Saturday night is quiet in Lausanne' },
                    { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'Saturday dawn over Lake Geneva and the Alps' },
                    { start: 7, end: 9, emoji: 'ü•ê', text: 'Slow Saturday breakfast in Lausanne' },
                    { start: 9, end: 11, emoji: 'üõí', text: 'Saturday groceries at the market in Lausanne' },
                    { start: 11, end: 12, emoji: 'üß∫', text: 'Weekend errands in Lausanne before lunch' },
                    { start: 12, end: 13, emoji: 'üç¥', text: 'Long Saturday lunch on a terrace in Lausanne' },
                    { start: 13, end: 15, emoji: 'üö≤', text: 'Weekend afternoon in Lausanne ‚Äî lakeside walk or bike ride' },
                    { start: 15, end: 16, emoji: '‚òï', text: 'Saturday coffee break in Lausanne with friends' },
                    { start: 16, end: 18, emoji: 'üåÖ', text: 'Late Saturday by the lake in Lausanne' },
                    { start: 18, end: 19, emoji: 'üè†', text: 'Heading home for Saturday evening plans in Lausanne' },
                    { start: 19, end: 21, emoji: 'üç∑', text: 'Saturday night dinner in Lausanne' },
                    { start: 21, end: 22, emoji: 'üé¨', text: 'Cinema or drinks on a Saturday night in Lausanne' },
                    { start: 22, end: 24, emoji: 'üåô', text: 'Lausanne settles into late Saturday night' }
                ],
                fr: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'La nuit de samedi est calme √† Lausanne' },
                    { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'Aube du samedi sur le lac L√©man et les Alpes' },
                    { start: 7, end: 9, emoji: 'ü•ê', text: 'Petit-d√©jeuner du samedi sans stress √† Lausanne' },
                    { start: 9, end: 11, emoji: 'üõí', text: 'Courses du samedi au march√© √† Lausanne' },
                    { start: 11, end: 12, emoji: 'üß∫', text: 'Petites t√¢ches du week-end √† Lausanne avant le d√©jeuner' },
                    { start: 12, end: 13, emoji: 'üç¥', text: 'Long d√©jeuner du samedi en terrasse √† Lausanne' },
                    { start: 13, end: 15, emoji: 'üö≤', text: 'Apr√®s-midi de week-end √† Lausanne ‚Äî promenade ou v√©lo au bord du lac' },
                    { start: 15, end: 16, emoji: '‚òï', text: 'Pause caf√© du samedi √† Lausanne entre amis' },
                    { start: 16, end: 18, emoji: 'üåÖ', text: 'Fin de samedi au bord du lac √† Lausanne' },
                    { start: 18, end: 19, emoji: 'üè†', text: 'Retour √† la maison pour la soir√©e de samedi √† Lausanne' },
                    { start: 19, end: 21, emoji: 'üç∑', text: 'D√Æner du samedi soir √† Lausanne' },
                    { start: 21, end: 22, emoji: 'üé¨', text: 'Cin√©ma ou sortie entre amis un samedi soir √† Lausanne' },
                    { start: 22, end: 24, emoji: 'üåô', text: 'Lausanne se pose en fin de nuit de samedi' }
                ],
                pt: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'A noite de s√°bado est√° calma em Lausanne' },
                    { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'Aurora de s√°bado sobre o Lago L√©man e os Alpes' },
                    { start: 7, end: 9, emoji: 'ü•ê', text: 'Pequeno-almo√ßo de s√°bado sem pressa em Lausanne' },
                    { start: 9, end: 11, emoji: 'üõí', text: 'Compras de s√°bado no mercado em Lausanne' },
                    { start: 11, end: 12, emoji: 'üß∫', text: 'Pequenas tarefas de fim de semana em Lausanne antes do almo√ßo' },
                    { start: 12, end: 13, emoji: 'üç¥', text: 'Almo√ßo longo de s√°bado numa esplanada em Lausanne' },
                    { start: 13, end: 15, emoji: 'üö≤', text: 'Tarde de fim de semana em Lausanne ‚Äî passeio ou bicicleta junto ao lago' },
                    { start: 15, end: 16, emoji: '‚òï', text: 'Pausa para caf√© de s√°bado em Lausanne com amigos' },
                    { start: 16, end: 18, emoji: 'üåÖ', text: 'Fim de tarde de s√°bado junto ao lago em Lausanne' },
                    { start: 18, end: 19, emoji: 'üè†', text: 'Regresso a casa para os planos de s√°bado √† noite em Lausanne' },
                    { start: 19, end: 21, emoji: 'üç∑', text: 'Jantar de s√°bado √† noite em Lausanne' },
                    { start: 21, end: 22, emoji: 'üé¨', text: 'Cinema ou sa√≠da com amigos no s√°bado √† noite em Lausanne' },
                    { start: 22, end: 24, emoji: 'üåô', text: 'Lausanne acalma no fim da noite de s√°bado' }
                ]
            },
            sun: {
                en: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'Sunday night in Lausanne is calm before mountain plans' },
                    { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'Sunday sunrise over Lausanne ‚Äî alpine day ahead' },
                    { start: 7, end: 9, emoji: 'ü•ê', text: 'Early Sunday breakfast before heading to the Alps' },
                    { start: 9, end: 11, emoji: 'üéø', text: 'Sunday ski departures from Lausanne toward nearby resorts' },
                    { start: 11, end: 12, emoji: 'üèÇ', text: 'On the slopes above Lausanne ‚Äî fresh mountain air' },
                    { start: 12, end: 13, emoji: 'üç≤', text: 'Sunday mountain lunch after morning skiing' },
                    { start: 13, end: 15, emoji: 'üéø', text: 'Afternoon skiing time near Lausanne' },
                    { start: 15, end: 16, emoji: '‚òï', text: 'Hot chocolate break in the mountains' },
                    { start: 16, end: 18, emoji: 'üöû', text: 'Returning to Lausanne from a ski day' },
                    { start: 18, end: 19, emoji: 'üè†', text: 'Back home in Lausanne after Sunday skiing' },
                    { start: 19, end: 21, emoji: 'üçΩÔ∏è', text: 'Quiet Sunday dinner in Lausanne' },
                    { start: 21, end: 22, emoji: 'üìö', text: 'Preparing for the week in Lausanne' },
                    { start: 22, end: 24, emoji: 'üåô', text: 'Sunday night wind-down in Lausanne' }
                ],
                fr: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'La nuit de dimanche √† Lausanne est calme avant les plans montagne' },
                    { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'Lever du soleil du dimanche sur Lausanne ‚Äî journ√©e alpine en vue' },
                    { start: 7, end: 9, emoji: 'ü•ê', text: 'Petit-d√©jeuner du dimanche avant de partir vers les Alpes' },
                    { start: 9, end: 11, emoji: 'üéø', text: 'D√©parts du dimanche depuis Lausanne vers les stations de ski' },
                    { start: 11, end: 12, emoji: 'üèÇ', text: 'Sur les pistes au-dessus de Lausanne ‚Äî air frais de montagne' },
                    { start: 12, end: 13, emoji: 'üç≤', text: 'D√©jeuner dominical en montagne apr√®s le ski du matin' },
                    { start: 13, end: 15, emoji: 'üéø', text: 'Apr√®s-midi ski pr√®s de Lausanne' },
                    { start: 15, end: 16, emoji: '‚òï', text: 'Pause chocolat chaud √† la montagne' },
                    { start: 16, end: 18, emoji: 'üöû', text: 'Retour √† Lausanne apr√®s la journ√©e de ski' },
                    { start: 18, end: 19, emoji: 'üè†', text: 'De retour √† la maison √† Lausanne apr√®s le ski' },
                    { start: 19, end: 21, emoji: 'üçΩÔ∏è', text: 'D√Æner calme du dimanche √† Lausanne' },
                    { start: 21, end: 22, emoji: 'üìö', text: 'Pr√©paration de la semaine √† Lausanne' },
                    { start: 22, end: 24, emoji: 'üåô', text: 'Fin de dimanche soir tranquille √† Lausanne' }
                ],
                pt: [
                    { start: 0, end: 5, emoji: 'üåô', text: 'A noite de domingo em Lausanne √© calma antes dos planos de montanha' },
                    { start: 5, end: 7, emoji: 'üèîÔ∏è', text: 'Nascer do sol de domingo em Lausanne ‚Äî dia alpino pela frente' },
                    { start: 7, end: 9, emoji: 'ü•ê', text: 'Pequeno-almo√ßo de domingo antes de seguir para os Alpes' },
                    { start: 9, end: 11, emoji: 'üéø', text: 'Sa√≠das de domingo de Lausanne para as est√¢ncias de ski' },
                    { start: 11, end: 12, emoji: 'üèÇ', text: 'Nas pistas perto de Lausanne ‚Äî ar fresco da montanha' },
                    { start: 12, end: 13, emoji: 'üç≤', text: 'Almo√ßo de domingo na montanha depois do ski da manh√£' },
                    { start: 13, end: 15, emoji: 'üéø', text: 'Tarde de ski perto de Lausanne' },
                    { start: 15, end: 16, emoji: '‚òï', text: 'Pausa para chocolate quente na montanha' },
                    { start: 16, end: 18, emoji: 'üöû', text: 'Regresso a Lausanne depois de um dia de ski' },
                    { start: 18, end: 19, emoji: 'üè†', text: 'De volta a casa em Lausanne ap√≥s o ski de domingo' },
                    { start: 19, end: 21, emoji: 'üçΩÔ∏è', text: 'Jantar calmo de domingo em Lausanne' },
                    { start: 21, end: 22, emoji: 'üìö', text: 'Prepara√ß√£o da semana em Lausanne' },
                    { start: 22, end: 24, emoji: 'üåô', text: 'Final tranquilo da noite de domingo em Lausanne' }
                ]
            }
        };

        // ---- Neuroscience Tips per language ----
        const neuroTips = {
            en: [
                { category: 'Circadian Rhythms', emoji: 'üåÖ', tip: "Your body's master clock ‚Äî the suprachiasmatic nucleus ‚Äî is only about the size of a grain of rice, yet it orchestrates the timing of nearly every cell in your body. Morning sunlight is its most powerful calibrator.", source: 'Chronobiology research' },
                { category: 'Jet Lag Science', emoji: '‚úàÔ∏è', tip: "Travelling east (like Mindelo ‚Üí Lausanne) is harder on your body than going west. Your internal clock naturally runs slightly longer than 24 hours, making it easier to extend your day than shorten it.", source: 'Sleep medicine research' },
                { category: 'Time Perception', emoji: '‚è≥', tip: "Time feels slower when you're experiencing new things. That's why holidays feel long but routine weeks fly by. Your brain creates more detailed memories for novel experiences, making them seem to last longer in retrospect.", source: 'Cognitive neuroscience' },
                { category: 'Sleep Science', emoji: 'üò¥', tip: "During deep sleep, your brain's glymphatic system flushes out metabolic waste ‚Äî including proteins linked to Alzheimer's. Think of sleep as your brain's nightly cleaning service.", source: 'Neuroscience of sleep' },
                { category: 'Social Jetlag', emoji: '‚è∞', tip: "Staying up late on weekends and sleeping in creates \"social jetlag\" ‚Äî your body experiences it much like crossing time zones. Keeping a consistent sleep schedule, even on weekends, benefits your health.", source: 'Chronobiology research' },
                { category: 'Light & Mood', emoji: 'üí°', tip: "Blue light from screens suppresses melatonin production, but it's not just about sleep ‚Äî light exposure patterns throughout the day also affect mood, alertness, and even immune function.", source: 'Photobiology research' },
                { category: 'Nostalgia & Time', emoji: 'üéµ', tip: "Music heard between ages 12-22 tends to stick with us the strongest. This \"reminiscence bump\" happens because your brain encodes memories more intensely during periods of identity formation.", source: 'Memory research' },
                { category: 'Body Temperature', emoji: 'üå°Ô∏è', tip: "Your body temperature follows a circadian rhythm, dropping about 1-1.5¬∞C at night. This cooling is a signal to your brain that it's time to sleep ‚Äî a cool bedroom (around 18¬∞C) supports better rest.", source: 'Thermoregulation studies' },
                { category: 'Chronotypes', emoji: 'ü¶â', tip: "Whether you're a morning lark or night owl is largely genetic. About 25% of people are strong morning types, 25% strong evening types, and the rest fall somewhere in between.", source: 'Behavioral genetics' },
                { category: 'Napping Science', emoji: 'üí§', tip: 'A 20-minute nap boosts alertness and performance without grogginess. Longer naps (90 minutes) allow a full sleep cycle and can enhance creativity and emotional memory.', source: 'Sleep research' },
                { category: 'Sodade & The Brain', emoji: 'üíô', tip: "Longing for home activates brain regions associated with reward and motivation ‚Äî not just sadness. Sodade, that deeply Cabo Verdean feeling, is your brain's way of keeping important social bonds alive.", source: 'Social neuroscience' },
                { category: 'Bilingual Brains', emoji: 'üß†', tip: 'Speaking multiple languages (like Kriolu and French) strengthens executive function and may delay cognitive decline. Each language activates slightly different neural networks, keeping your brain more flexible.', source: 'Neurolinguistics' },
                { category: 'Altitude & Cognition', emoji: 'üèîÔ∏è', tip: "Living at altitude (like visits to the Swiss Alps) temporarily affects cognition due to lower oxygen. But regular exposure improves your body's oxygen efficiency ‚Äî mountain air literally sharpens your blood.", source: 'High-altitude physiology' },
                { category: 'Ocean & Wellbeing', emoji: 'üåä', tip: "Being near the ocean ‚Äî like in Mindelo ‚Äî reduces cortisol and increases serotonin. The sound of waves alters brain wave patterns, promoting a meditative state. It's called \"blue mind\" science.", source: 'Environmental neuroscience' },
                { category: 'Food & Brain Clocks', emoji: 'üçΩÔ∏è', tip: "When you eat matters almost as much as what you eat for your circadian health. Regular meal times help synchronize peripheral body clocks in your liver, gut, and muscles with your brain's master clock.", source: 'Chrononutrition research' }
            ],
            fr: [
                { category: 'Rythmes circadiens', emoji: 'üåÖ', tip: "L'horloge ma√Ætre de votre corps ‚Äî le noyau suprachiasmatique ‚Äî ne fait que la taille d'un grain de riz, mais orchestre le rythme de presque chaque cellule. La lumi√®re du matin est son calibrateur le plus puissant.", source: 'Recherche en chronobiologie' },
                { category: 'Science du jet lag', emoji: '‚úàÔ∏è', tip: "Voyager vers l'est (comme Mindelo ‚Üí Lausanne) est plus difficile pour le corps que vers l'ouest. Votre horloge interne fonctionne naturellement un peu plus de 24 heures, ce qui rend plus facile d'allonger votre journ√©e que de la raccourcir.", source: 'M√©decine du sommeil' },
                { category: 'Perception du temps', emoji: '‚è≥', tip: "Le temps semble plus lent quand on vit de nouvelles exp√©riences. C'est pourquoi les vacances semblent longues mais les semaines de routine filent. Votre cerveau cr√©e des souvenirs plus d√©taill√©s pour les exp√©riences nouvelles.", source: 'Neurosciences cognitives' },
                { category: 'Science du sommeil', emoji: 'üò¥', tip: "Pendant le sommeil profond, le syst√®me glymphatique de votre cerveau √©vacue les d√©chets m√©taboliques ‚Äî y compris les prot√©ines li√©es √† Alzheimer. Pensez au sommeil comme au service de nettoyage nocturne de votre cerveau.", source: 'Neurosciences du sommeil' },
                { category: 'Jet lag social', emoji: '‚è∞', tip: "Se coucher tard le week-end cr√©e un ¬´ jet lag social ¬ª ‚Äî votre corps le ressent comme un d√©calage horaire. Garder un horaire de sommeil r√©gulier, m√™me le week-end, est b√©n√©fique pour votre sant√©.", source: 'Recherche en chronobiologie' },
                { category: 'Lumi√®re & humeur', emoji: 'üí°', tip: "La lumi√®re bleue des √©crans supprime la production de m√©latonine, mais ce n'est pas qu'une question de sommeil ‚Äî les sch√©mas d'exposition √† la lumi√®re affectent aussi l'humeur, la vigilance et m√™me la fonction immunitaire.", source: 'Recherche en photobiologie' },
                { category: 'Nostalgie & temps', emoji: 'üéµ', tip: "La musique entendue entre 12 et 22 ans reste la plus marquante. Ce ¬´ pic de r√©miniscence ¬ª se produit parce que le cerveau encode les souvenirs plus intens√©ment pendant les p√©riodes de formation de l'identit√©.", source: 'Recherche sur la m√©moire' },
                { category: 'Temp√©rature corporelle', emoji: 'üå°Ô∏è', tip: "Votre temp√©rature corporelle suit un rythme circadien, baissant d'environ 1 √† 1,5¬∞C la nuit. Ce refroidissement signale au cerveau qu'il est temps de dormir ‚Äî une chambre fra√Æche (environ 18¬∞C) favorise un meilleur repos.", source: '√âtudes sur la thermor√©gulation' },
                { category: 'Chronotypes', emoji: 'ü¶â', tip: "√ätre l√®ve-t√¥t ou couche-tard est en grande partie g√©n√©tique. Environ 25% des gens sont de forts types matinaux, 25% de forts types vesp√©raux, et le reste se situe entre les deux.", source: 'G√©n√©tique comportementale' },
                { category: 'Science de la sieste', emoji: 'üí§', tip: "Une sieste de 20 minutes am√©liore la vigilance et les performances sans somnolence. Les siestes plus longues (90 minutes) permettent un cycle de sommeil complet et peuvent stimuler la cr√©ativit√© et la m√©moire √©motionnelle.", source: 'Recherche sur le sommeil' },
                { category: 'Sodade & le cerveau', emoji: 'üíô', tip: "Le mal du pays active les r√©gions du cerveau associ√©es √† la r√©compense et √† la motivation ‚Äî pas seulement √† la tristesse. La sodade, ce sentiment profond√©ment cap-verdien, est la fa√ßon dont votre cerveau maintient les liens sociaux importants.", source: 'Neurosciences sociales' },
                { category: 'Cerveaux bilingues', emoji: 'üß†', tip: "Parler plusieurs langues (comme le cr√©ole et le fran√ßais) renforce les fonctions ex√©cutives et peut retarder le d√©clin cognitif. Chaque langue active des r√©seaux neuronaux l√©g√®rement diff√©rents, gardant votre cerveau plus flexible.", source: 'Neurolinguistique' },
                { category: 'Altitude & cognition', emoji: 'üèîÔ∏è', tip: "Vivre en altitude (comme les Alpes suisses) affecte temporairement la cognition √† cause du manque d'oxyg√®ne. Mais une exposition r√©guli√®re am√©liore l'efficacit√© de l'oxyg√©nation ‚Äî l'air de la montagne aiguise litt√©ralement votre sang.", source: 'Physiologie de haute altitude' },
                { category: 'Oc√©an & bien-√™tre', emoji: 'üåä', tip: "√ätre pr√®s de l'oc√©an ‚Äî comme √† Mindelo ‚Äî r√©duit le cortisol et augmente la s√©rotonine. Le son des vagues modifie les ondes c√©r√©brales, favorisant un √©tat m√©ditatif. C'est la science du ¬´ blue mind ¬ª.", source: 'Neurosciences environnementales' },
                { category: 'Alimentation & horloges', emoji: 'üçΩÔ∏è', tip: "Quand vous mangez compte presque autant que ce que vous mangez pour votre sant√© circadienne. Des repas r√©guliers synchronisent les horloges p√©riph√©riques du foie, de l'intestin et des muscles avec l'horloge ma√Ætre du cerveau.", source: 'Recherche en chrononutrition' }
            ],
            pt: [
                { category: 'Ritmos circadianos', emoji: 'üåÖ', tip: "O rel√≥gio-mestre do seu corpo ‚Äî o n√∫cleo supraquiasm√°tico ‚Äî tem apenas o tamanho de um gr√£o de arroz, mas orquestra o ritmo de quase todas as c√©lulas do corpo. A luz da manh√£ √© o seu calibrador mais poderoso.", source: 'Investiga√ß√£o em cronobiologia' },
                { category: 'Ci√™ncia do jet lag', emoji: '‚úàÔ∏è', tip: "Viajar para leste (como Mindelo ‚Üí Lausanne) √© mais dif√≠cil para o corpo do que para oeste. O rel√≥gio interno funciona naturalmente um pouco mais de 24 horas, tornando mais f√°cil prolongar o dia do que encurt√°-lo.", source: 'Medicina do sono' },
                { category: 'Perce√ß√£o do tempo', emoji: '‚è≥', tip: "O tempo parece mais lento quando vivemos experi√™ncias novas. Por isso as f√©rias parecem longas e as semanas de rotina passam a correr. O c√©rebro cria mem√≥rias mais detalhadas para experi√™ncias novas, fazendo-as parecer mais longas.", source: 'Neuroci√™ncia cognitiva' },
                { category: 'Ci√™ncia do sono', emoji: 'üò¥', tip: "Durante o sono profundo, o sistema glinf√°tico do c√©rebro elimina res√≠duos metab√≥licos ‚Äî incluindo prote√≠nas ligadas ao Alzheimer. Pense no sono como o servi√ßo de limpeza nocturno do seu c√©rebro.", source: 'Neuroci√™ncia do sono' },
                { category: 'Jet lag social', emoji: '‚è∞', tip: "Ficar acordado at√© tarde ao fim de semana cria ¬´ jet lag social ¬ª ‚Äî o corpo sente-o como mudar de fuso hor√°rio. Manter um hor√°rio de sono regular, mesmo ao fim de semana, beneficia a sua sa√∫de.", source: 'Investiga√ß√£o em cronobiologia' },
                { category: 'Luz & humor', emoji: 'üí°', tip: "A luz azul dos ecr√£s suprime a produ√ß√£o de melatonina, mas n√£o √© s√≥ uma quest√£o de sono ‚Äî os padr√µes de exposi√ß√£o √† luz ao longo do dia afectam tamb√©m o humor, a aten√ß√£o e at√© a fun√ß√£o imunit√°ria.", source: 'Investiga√ß√£o em fotobiologia' },
                { category: 'Nostalgia & tempo', emoji: 'üéµ', tip: "A m√∫sica ouvida entre os 12 e os 22 anos marca-nos mais. Este ¬´ pico de reminisc√™ncia ¬ª acontece porque o c√©rebro codifica mem√≥rias mais intensamente durante os per√≠odos de forma√ß√£o da identidade.", source: 'Investiga√ß√£o sobre mem√≥ria' },
                { category: 'Temperatura corporal', emoji: 'üå°Ô∏è', tip: "A temperatura corporal segue um ritmo circadiano, baixando cerca de 1 a 1,5¬∞C √† noite. Este arrefecimento sinaliza ao c√©rebro que √© hora de dormir ‚Äî um quarto fresco (cerca de 18¬∞C) favorece um melhor descanso.", source: 'Estudos de termorregula√ß√£o' },
                { category: 'Cronotipos', emoji: 'ü¶â', tip: "Ser madrugador ou noct√≠vago √© em grande parte gen√©tico. Cerca de 25% das pessoas s√£o fortemente matutinas, 25% fortemente vespertinas, e o resto situa-se algures entre os dois.", source: 'Gen√©tica comportamental' },
                { category: 'Ci√™ncia da sesta', emoji: 'üí§', tip: "Uma sesta de 20 minutos melhora a aten√ß√£o e o desempenho sem sonol√™ncia. Sestas mais longas (90 minutos) permitem um ciclo completo de sono e podem estimular a criatividade e a mem√≥ria emocional.", source: 'Investiga√ß√£o sobre o sono' },
                { category: 'Sodade & o c√©rebro', emoji: 'üíô', tip: "A saudade de casa activa regi√µes cerebrais associadas √† recompensa e motiva√ß√£o ‚Äî n√£o apenas √† tristeza. A sodade, esse sentimento profundamente cabo-verdiano, √© a forma do c√©rebro manter os la√ßos sociais importantes.", source: 'Neuroci√™ncia social' },
                { category: 'C√©rebros bilingues', emoji: 'üß†', tip: "Falar v√°rias l√≠nguas (como o crioulo e o franc√™s) fortalece as fun√ß√µes executivas e pode atrasar o decl√≠nio cognitivo. Cada l√≠ngua activa redes neuronais ligeiramente diferentes, mantendo o c√©rebro mais flex√≠vel.", source: 'Neurolingu√≠stica' },
                { category: 'Altitude & cogni√ß√£o', emoji: 'üèîÔ∏è', tip: "Viver em altitude (como nos Alpes su√≠√ßos) afecta temporariamente a cogni√ß√£o devido ao menor oxig√©nio. Mas a exposi√ß√£o regular melhora a efici√™ncia do oxig√©nio ‚Äî o ar da montanha afia literalmente o sangue.", source: 'Fisiologia de alta altitude' },
                { category: 'Oceano & bem-estar', emoji: 'üåä', tip: "Estar perto do oceano ‚Äî como em Mindelo ‚Äî reduz o cortisol e aumenta a serotonina. O som das ondas altera os padr√µes de ondas cerebrais, promovendo um estado meditativo. √â a ci√™ncia do ¬´ blue mind ¬ª.", source: 'Neuroci√™ncia ambiental' },
                { category: 'Alimenta√ß√£o & rel√≥gios', emoji: 'üçΩÔ∏è', tip: "Quando se come importa quase tanto como o que se come para a sa√∫de circadiana. Refei√ß√µes regulares ajudam a sincronizar os rel√≥gios perif√©ricos do f√≠gado, intestino e m√∫sculos com o rel√≥gio-mestre do c√©rebro.", source: 'Investiga√ß√£o em cronoNutri√ß√£o' }
            ]
        };

        // ---- Calendar event descriptions per language ----
        function getCulturalEvents() {
            const year = new Date().getFullYear();
            const easter = getEasterDate(year);

            const shroveTuesday = addDays(easter, -47);
            const ashWednesday = addDays(easter, -46);
            const goodFriday = addDays(easter, -2);
            const easterMonday = addDays(easter, 1);
            const ascension = addDays(easter, 39);
            const whitMonday = addDays(easter, 50);
            const federalFast = getFederalFastMonday(year);

            const cvEvents = {
                en: [
                    { date: `${year}-01-01`, name: "Ano Novo", desc: "New Year's Day ‚Äî celebrations across the islands" },
                    { date: `${year}-01-13`, name: "Dia da Liberdade e Democracia", desc: "Freedom and Democracy Day" },
                    { date: `${year}-01-20`, name: "Dia dos Her√≥is Nacionais", desc: "National Heroes' Day ‚Äî honouring Am√≠lcar Cabral" },
                    { date: `${year}-01-22`, name: "Dia de S√£o Vicente", desc: "S√£o Vicente island day ‚Äî concerts on Rua de Lisboa" },
                    { date: fmt(addDays(shroveTuesday, -21)), name: "Mandingas Begin", desc: "Sunday parades of Mandingas tradition start in Mindelo" },
                    { date: fmt(shroveTuesday), name: "Carnaval ‚Äî Ter√ßa de Entrudo", desc: "Shrove Tuesday ‚Äî Mindelo's main Carnival parade, the biggest in Cabo Verde" },
                    { date: fmt(ashWednesday), name: "Quarta-feira de Cinzas", desc: "Ash Wednesday ‚Äî national holiday, Carnival awards ceremony" },
                    { date: fmt(goodFriday), name: "Sexta-feira Santa", desc: "Good Friday" },
                    { date: `${year}-05-01`, name: "Dia do Trabalhador", desc: "Labour Day" },
                    { date: `${year}-06-01`, name: "Dia da Crian√ßa", desc: "Children's Day ‚Äî festivities across the islands" },
                    { date: `${year}-06-24`, name: "S√£o Jo√£o ‚Äî Kola San Djon", desc: "Midsummer festival in Ribeira de Juli√£o ‚Äî music, drumming, fire-jumping" },
                    { date: `${year}-07-05`, name: "Dia da Independ√™ncia", desc: "Independence Day ‚Äî Cabo Verde's national day, major concerts" },
                    { date: `${year}-08-15`, name: "Nossa Senhora da Gra√ßa", desc: "Assumption of Mary ‚Äî patron saint festivities" },
                    { date: `${year}-08-15`, name: "Ba√≠a das Gatas Festival", desc: "Free open-air beach music festival near Mindelo (full moon weekend in August)" },
                    { date: `${year}-09-12`, name: "Dia da Na√ß√£o", desc: "Nationality Day ‚Äî celebrating Cabo Verdean identity and culture" },
                    { date: `${year}-10-01`, name: "Mindelact", desc: "International theatre festival in Mindelo (September/October)" },
                    { date: `${year}-11-01`, name: "Dia de Todos os Santos", desc: "All Saints' Day" },
                    { date: `${year}-12-25`, name: "Natal", desc: "Christmas Day ‚Äî family gatherings and festive food" },
                    { date: `${year}-12-31`, name: "R√©veillon", desc: "New Year's Eve ‚Äî major concert on Rua de Lisboa" }
                ],
                fr: [
                    { date: `${year}-01-01`, name: "Ano Novo", desc: "Jour de l'An ‚Äî c√©l√©brations √† travers les √Æles" },
                    { date: `${year}-01-13`, name: "Dia da Liberdade e Democracia", desc: "Jour de la Libert√© et de la D√©mocratie" },
                    { date: `${year}-01-20`, name: "Dia dos Her√≥is Nacionais", desc: "Jour des H√©ros Nationaux ‚Äî en l'honneur d'Am√≠lcar Cabral" },
                    { date: `${year}-01-22`, name: "Dia de S√£o Vicente", desc: "F√™te de l'√Æle de S√£o Vicente ‚Äî concerts sur la Rua de Lisboa" },
                    { date: fmt(addDays(shroveTuesday, -21)), name: "D√©but des Mandingas", desc: "Les d√©fil√©s dominicaux de la tradition des Mandingas commencent √† Mindelo" },
                    { date: fmt(shroveTuesday), name: "Carnaval ‚Äî Ter√ßa de Entrudo", desc: "Mardi gras ‚Äî le plus grand d√©fil√© de Carnaval du Cabo Verde √† Mindelo" },
                    { date: fmt(ashWednesday), name: "Quarta-feira de Cinzas", desc: "Mercredi des Cendres ‚Äî jour f√©ri√©, c√©r√©monie de remise des prix du Carnaval" },
                    { date: fmt(goodFriday), name: "Sexta-feira Santa", desc: "Vendredi Saint" },
                    { date: `${year}-05-01`, name: "Dia do Trabalhador", desc: "F√™te du Travail" },
                    { date: `${year}-06-01`, name: "Dia da Crian√ßa", desc: "Journ√©e des enfants ‚Äî festivit√©s √† travers les √Æles" },
                    { date: `${year}-06-24`, name: "S√£o Jo√£o ‚Äî Kola San Djon", desc: "Festival de la Saint-Jean √† Ribeira de Juli√£o ‚Äî musique, percussions, sauts de feu" },
                    { date: `${year}-07-05`, name: "Dia da Independ√™ncia", desc: "Jour de l'Ind√©pendance ‚Äî f√™te nationale, grands concerts" },
                    { date: `${year}-08-15`, name: "Nossa Senhora da Gra√ßa", desc: "Assomption de Marie ‚Äî f√™tes patronales" },
                    { date: `${year}-08-15`, name: "Ba√≠a das Gatas Festival", desc: "Festival de musique en plein air gratuit pr√®s de Mindelo (week-end de pleine lune en ao√ªt)" },
                    { date: `${year}-09-12`, name: "Dia da Na√ß√£o", desc: "Jour de la Nation ‚Äî c√©l√©bration de l'identit√© et la culture cap-verdiennes" },
                    { date: `${year}-10-01`, name: "Mindelact", desc: "Festival international de th√©√¢tre √† Mindelo (septembre/octobre)" },
                    { date: `${year}-11-01`, name: "Dia de Todos os Santos", desc: "Toussaint" },
                    { date: `${year}-12-25`, name: "Natal", desc: "No√´l ‚Äî repas de famille et ambiance festive" },
                    { date: `${year}-12-31`, name: "R√©veillon", desc: "R√©veillon du Nouvel An ‚Äî grand concert sur la Rua de Lisboa" }
                ],
                pt: [
                    { date: `${year}-01-01`, name: "Ano Novo", desc: "Dia de Ano Novo ‚Äî celebra√ß√µes por todas as ilhas" },
                    { date: `${year}-01-13`, name: "Dia da Liberdade e Democracia", desc: "Dia da Liberdade e da Democracia" },
                    { date: `${year}-01-20`, name: "Dia dos Her√≥is Nacionais", desc: "Dia dos Her√≥is Nacionais ‚Äî homenagem a Am√≠lcar Cabral" },
                    { date: `${year}-01-22`, name: "Dia de S√£o Vicente", desc: "Dia da ilha de S√£o Vicente ‚Äî concertos na Rua de Lisboa" },
                    { date: fmt(addDays(shroveTuesday, -21)), name: "In√≠cio dos Mandingas", desc: "Desfiles dominicais da tradi√ß√£o dos Mandingas come√ßam em Mindelo" },
                    { date: fmt(shroveTuesday), name: "Carnaval ‚Äî Ter√ßa de Entrudo", desc: "Ter√ßa-feira de Entrudo ‚Äî o maior desfile de Carnaval de Cabo Verde em Mindelo" },
                    { date: fmt(ashWednesday), name: "Quarta-feira de Cinzas", desc: "Quarta-feira de Cinzas ‚Äî feriado nacional, cerim√≥nia de premia√ß√£o do Carnaval" },
                    { date: fmt(goodFriday), name: "Sexta-feira Santa", desc: "Sexta-feira Santa" },
                    { date: `${year}-05-01`, name: "Dia do Trabalhador", desc: "Dia do Trabalhador" },
                    { date: `${year}-06-01`, name: "Dia da Crian√ßa", desc: "Dia da Crian√ßa ‚Äî festividades por todas as ilhas" },
                    { date: `${year}-06-24`, name: "S√£o Jo√£o ‚Äî Kola San Djon", desc: "Festival de S√£o Jo√£o em Ribeira de Juli√£o ‚Äî m√∫sica, tambores, saltos sobre fogueiras" },
                    { date: `${year}-07-05`, name: "Dia da Independ√™ncia", desc: "Dia da Independ√™ncia ‚Äî dia nacional de Cabo Verde, grandes concertos" },
                    { date: `${year}-08-15`, name: "Nossa Senhora da Gra√ßa", desc: "Assun√ß√£o de Maria ‚Äî festividades da santa padroeira" },
                    { date: `${year}-08-15`, name: "Ba√≠a das Gatas Festival", desc: "Festival de m√∫sica gratuito ao ar livre perto de Mindelo (fim de semana de lua cheia em agosto)" },
                    { date: `${year}-09-12`, name: "Dia da Na√ß√£o", desc: "Dia da Nacionalidade ‚Äî celebra√ß√£o da identidade e cultura cabo-verdianas" },
                    { date: `${year}-10-01`, name: "Mindelact", desc: "Festival internacional de teatro em Mindelo (setembro/outubro)" },
                    { date: `${year}-11-01`, name: "Dia de Todos os Santos", desc: "Dia de Todos os Santos" },
                    { date: `${year}-12-25`, name: "Natal", desc: "Dia de Natal ‚Äî reuni√µes familiares e comida festiva" },
                    { date: `${year}-12-31`, name: "R√©veillon", desc: "Noite de Ano Novo ‚Äî grande concerto na Rua de Lisboa" }
                ]
            };

            const chEvents = {
                en: [
                    { date: `${year}-01-01`, name: "Nouvel An", desc: "New Year's Day" },
                    { date: `${year}-01-02`, name: "Saint-Berchtold", desc: "Vaud cantonal holiday, unique to Lausanne's region" },
                    { date: fmt(goodFriday), name: "Vendredi Saint", desc: "Good Friday" },
                    { date: fmt(easterMonday), name: "Lundi de P√¢ques", desc: "Easter Monday ‚Äî chocolate eggs and family brunches" },
                    { date: fmt(ascension), name: "Ascension", desc: "Ascension Day ‚Äî a Thursday off, long weekend tradition" },
                    { date: fmt(whitMonday), name: "Lundi de Pentec√¥te", desc: "Whit Monday" },
                    { date: `${year}-08-01`, name: "F√™te nationale", desc: "Swiss National Day ‚Äî fireworks, bonfires, and fondue" },
                    { date: fmt(federalFast), name: "Lundi du Je√ªne f√©d√©ral", desc: "Federal Fast Monday ‚Äî Vaud tradition" },
                    { date: `${year}-12-25`, name: "No√´l", desc: "Christmas Day ‚Äî fondue, raclette, and vin chaud" },
                    { date: `${year}-02-01`, name: "Prix de Lausanne", desc: "Prestigious international ballet competition for young dancers (early February)" },
                    { date: `${year}-04-27`, name: "BDFIL", desc: "Lausanne International Comics Festival ‚Äî two weeks in the train station quarter" },
                    { date: `${year}-05-01`, name: "Bal√©lec", desc: "EPFL's massive open-air student festival ‚Äî one of the largest in Europe" },
                    { date: `${year}-05-23`, name: "Caves Ouvertes Vaudoises", desc: "200+ Vaud winemakers open their doors ‚Äî Chasselas tastings across Lavaux" },
                    { date: `${year}-06-21`, name: "F√™te de la Musique", desc: "Free city-wide music festival ‚Äî stages pop up across Lausanne" },
                    { date: `${year}-06-30`, name: "Festival de la Cit√©", desc: "Free multi-arts festival ‚Äî theatre, dance, music in Lausanne's old town (early July)" },
                    { date: `${year}-07-04`, name: "Montreux Jazz Festival", desc: "Legendary two-week jazz & music festival on Lake Geneva (mid-July)" },
                    { date: `${year}-07-21`, name: "Pal√©o Festival Nyon", desc: "Switzerland's biggest open-air festival ‚Äî 230,000 spectators over 6 days" },
                    { date: `${year}-08-21`, name: "Athletissima", desc: "Diamond League athletics meeting at the Olympic Stadium" },
                    { date: `${year}-09-26`, name: "Vendanges in Lavaux", desc: "Wine harvest season ‚Äî vineyard experiences in the UNESCO Lavaux terraces" },
                    { date: `${year}-10-14`, name: "LUFF", desc: "Lausanne Underground Film & Music Festival ‚Äî avant-garde cinema and sound" },
                    { date: `${year}-10-25`, name: "Lausanne Marathon", desc: "Scenic marathon along Lake Geneva ‚Äî from Place de Milan to Ouchy" },
                    { date: `${year}-11-20`, name: "B√¥ No√´l", desc: "Lausanne's Christmas markets, light installations, and festive events until Dec 31" },
                    { date: `${year}-12-05`, name: "Les Urbaines", desc: "Free festival of artistic experimentation ‚Äî sound, visual, and performing arts" }
                ],
                fr: [
                    { date: `${year}-01-01`, name: "Nouvel An", desc: "Jour de l'An" },
                    { date: `${year}-01-02`, name: "Saint-Berchtold", desc: "Jour f√©ri√© cantonal vaudois, unique √† la r√©gion de Lausanne" },
                    { date: fmt(goodFriday), name: "Vendredi Saint", desc: "Vendredi Saint" },
                    { date: fmt(easterMonday), name: "Lundi de P√¢ques", desc: "Lundi de P√¢ques ‚Äî ≈ìufs en chocolat et brunchs en famille" },
                    { date: fmt(ascension), name: "Ascension", desc: "Jour de l'Ascension ‚Äî un jeudi de cong√©, tradition du long week-end" },
                    { date: fmt(whitMonday), name: "Lundi de Pentec√¥te", desc: "Lundi de Pentec√¥te" },
                    { date: `${year}-08-01`, name: "F√™te nationale", desc: "F√™te nationale suisse ‚Äî feux d'artifice, feux de joie et fondue" },
                    { date: fmt(federalFast), name: "Lundi du Je√ªne f√©d√©ral", desc: "Lundi du Je√ªne f√©d√©ral ‚Äî tradition vaudoise" },
                    { date: `${year}-12-25`, name: "No√´l", desc: "No√´l ‚Äî fondue, raclette et vin chaud" },
                    { date: `${year}-02-01`, name: "Prix de Lausanne", desc: "Prestigieux concours international de ballet pour jeunes danseurs (d√©but f√©vrier)" },
                    { date: `${year}-04-27`, name: "BDFIL", desc: "Festival international de la bande dessin√©e de Lausanne ‚Äî deux semaines au quartier de la gare" },
                    { date: `${year}-05-01`, name: "Bal√©lec", desc: "Le grand festival en plein air de l'EPFL ‚Äî l'un des plus grands d'Europe" },
                    { date: `${year}-05-23`, name: "Caves Ouvertes Vaudoises", desc: "Plus de 200 vignerons vaudois ouvrent leurs portes ‚Äî d√©gustations de Chasselas √† travers Lavaux" },
                    { date: `${year}-06-21`, name: "F√™te de la Musique", desc: "Festival de musique gratuit dans toute la ville ‚Äî sc√®nes partout dans Lausanne" },
                    { date: `${year}-06-30`, name: "Festival de la Cit√©", desc: "Festival multi-arts gratuit ‚Äî th√©√¢tre, danse, musique dans la vieille ville (d√©but juillet)" },
                    { date: `${year}-07-04`, name: "Montreux Jazz Festival", desc: "L√©gendaire festival de jazz et musique de deux semaines au bord du lac L√©man (mi-juillet)" },
                    { date: `${year}-07-21`, name: "Pal√©o Festival Nyon", desc: "Le plus grand festival en plein air de Suisse ‚Äî 230 000 spectateurs sur 6 jours" },
                    { date: `${year}-08-21`, name: "Athletissima", desc: "Meeting d'athl√©tisme Diamond League au stade Olympique" },
                    { date: `${year}-09-26`, name: "Vendanges √† Lavaux", desc: "Saison des vendanges ‚Äî exp√©riences viticoles dans les terrasses UNESCO de Lavaux" },
                    { date: `${year}-10-14`, name: "LUFF", desc: "Lausanne Underground Film & Music Festival ‚Äî cin√©ma et son avant-gardistes" },
                    { date: `${year}-10-25`, name: "Marathon de Lausanne", desc: "Marathon panoramique le long du lac L√©man ‚Äî de la Place de Milan √† Ouchy" },
                    { date: `${year}-11-20`, name: "B√¥ No√´l", desc: "March√©s de No√´l de Lausanne, illuminations et √©v√©nements festifs jusqu'au 31 d√©cembre" },
                    { date: `${year}-12-05`, name: "Les Urbaines", desc: "Festival gratuit d'exp√©rimentation artistique ‚Äî son, arts visuels et spectacle vivant" }
                ],
                pt: [
                    { date: `${year}-01-01`, name: "Nouvel An", desc: "Dia de Ano Novo" },
                    { date: `${year}-01-02`, name: "Saint-Berchtold", desc: "Feriado cantonal de Vaud, √∫nico da regi√£o de Lausanne" },
                    { date: fmt(goodFriday), name: "Vendredi Saint", desc: "Sexta-feira Santa" },
                    { date: fmt(easterMonday), name: "Lundi de P√¢ques", desc: "Segunda-feira de P√°scoa ‚Äî ovos de chocolate e brunches em fam√≠lia" },
                    { date: fmt(ascension), name: "Ascension", desc: "Dia da Ascens√£o ‚Äî uma quinta-feira de folga, tradi√ß√£o de fim de semana prolongado" },
                    { date: fmt(whitMonday), name: "Lundi de Pentec√¥te", desc: "Segunda-feira de Pentecostes" },
                    { date: `${year}-08-01`, name: "F√™te nationale", desc: "Dia Nacional da Su√≠√ßa ‚Äî fogo de artif√≠cio, fogueiras e fondue" },
                    { date: fmt(federalFast), name: "Lundi du Je√ªne f√©d√©ral", desc: "Segunda-feira do Jejum Federal ‚Äî tradi√ß√£o de Vaud" },
                    { date: `${year}-12-25`, name: "No√´l", desc: "Natal ‚Äî fondue, raclette e vinho quente" },
                    { date: `${year}-02-01`, name: "Prix de Lausanne", desc: "Prestigiosa competi√ß√£o internacional de ballet para jovens bailarinos (in√≠cio de fevereiro)" },
                    { date: `${year}-04-27`, name: "BDFIL", desc: "Festival Internacional de Banda Desenhada de Lausanne ‚Äî duas semanas no bairro da esta√ß√£o" },
                    { date: `${year}-05-01`, name: "Bal√©lec", desc: "O grande festival ao ar livre da EPFL ‚Äî um dos maiores da Europa" },
                    { date: `${year}-05-23`, name: "Caves Ouvertes Vaudoises", desc: "Mais de 200 viticultores de Vaud abrem as suas portas ‚Äî provas de Chasselas em Lavaux" },
                    { date: `${year}-06-21`, name: "F√™te de la Musique", desc: "Festival de m√∫sica gratuito por toda a cidade ‚Äî palcos espalhados por Lausanne" },
                    { date: `${year}-06-30`, name: "Festival de la Cit√©", desc: "Festival multiart√≠stico gratuito ‚Äî teatro, dan√ßa, m√∫sica na cidade velha (in√≠cio de julho)" },
                    { date: `${year}-07-04`, name: "Montreux Jazz Festival", desc: "Lend√°rio festival de jazz e m√∫sica de duas semanas no Lago L√©man (meados de julho)" },
                    { date: `${year}-07-21`, name: "Pal√©o Festival Nyon", desc: "O maior festival ao ar livre da Su√≠√ßa ‚Äî 230 000 espectadores em 6 dias" },
                    { date: `${year}-08-21`, name: "Athletissima", desc: "Meeting de atletismo Diamond League no Est√°dio Ol√≠mpico" },
                    { date: `${year}-09-26`, name: "Vendanges in Lavaux", desc: "√âpoca das vindimas ‚Äî experi√™ncias vin√≠colas nos terra√ßos UNESCO de Lavaux" },
                    { date: `${year}-10-14`, name: "LUFF", desc: "Lausanne Underground Film & Music Festival ‚Äî cinema e som de vanguarda" },
                    { date: `${year}-10-25`, name: "Marathon de Lausanne", desc: "Maratona panor√¢mica ao longo do Lago L√©man ‚Äî da Place de Milan a Ouchy" },
                    { date: `${year}-11-20`, name: "B√¥ No√´l", desc: "Mercados de Natal de Lausanne, instala√ß√µes de luz e eventos festivos at√© 31 de dezembro" },
                    { date: `${year}-12-05`, name: "Les Urbaines", desc: "Festival gratuito de experimenta√ß√£o art√≠stica ‚Äî som, artes visuais e artes performativas" }
                ]
            };

            return { cvEvents: cvEvents[currentLang], chEvents: chEvents[currentLang] };
        }

        // ---- Language Switcher ----
        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('timeBridgeLang', lang);
            document.documentElement.lang = lang;

            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent === lang.toUpperCase());
            });

            // Update static text elements
            const staticKeys = [
                'subtitle', 'locationCv', 'locationCh',
                'happeningLabelCv', 'happeningLabelCh',
                'callTitle', 'callSubtitle', 'callHoursCvLabel', 'callHoursChLabel',
                'weatherTitle', 'weatherSubtitle', 'weatherCvTitle', 'weatherChTitle',
                'sunTitle', 'sunSubtitle', 'sunCvTitle', 'sunChTitle',
                'calendarTitle', 'calendarSubtitle',
                'mediaTitle', 'mediaSubtitle', 'mediaCvTitle', 'mediaChTitle',
                'neuroTitle', 'footerText'
            ];
            staticKeys.forEach(key => {
                const el = document.getElementById(key);
                if (el && T[key]) {
                    el.textContent = T[key][lang];
                }
            });

            // Update data-i18n elements (media type labels)
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (T[key]) el.textContent = T[key][lang];
            });

            // Update time diff text
            document.getElementById('timeDiffPrefix').textContent = T.timeDiffPrefix[lang];
            document.getElementById('timeDiffSuffix').textContent = T.timeDiffSuffix[lang];
            document.getElementById('workHoursCv').textContent = T.callHoursCvValue[lang];
            document.getElementById('workHoursCh').textContent = T.callHoursChValue[lang];

            // Re-render dynamic sections
            updateClocks();
            updateHappening(new Date());
            renderCalendar();
            renderNeuroTip();
            refreshWeatherMeta();
            // Re-fetch weather to re-render with correct language
            fetchWeather();
        }

        // Make setLanguage global for onclick handlers
        window.setLanguage = setLanguage;

        // ---- Clock & Time ----
        function updateClocks() {
            const now = new Date();
            const locale = LOCALES[currentLang];

            // Mindelo time
            const cvOptions = { timeZone: MINDELO_TZ };
            const cvTime = now.toLocaleTimeString('en-GB', { ...cvOptions, hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
            const cvDate = now.toLocaleDateString(locale, { ...cvOptions, weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
            const cvParts = cvTime.split(':');
            document.getElementById('timeMindelo').innerHTML =
                cvParts[0] + ':' + cvParts[1] + '<span class="clock-seconds">:' + cvParts[2] + '</span>';
            document.getElementById('dateMindelo').textContent = cvDate;

            // Lausanne time
            const chOptions = { timeZone: LAUSANNE_TZ };
            const chTime = now.toLocaleTimeString('en-GB', { ...chOptions, hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
            const chDate = now.toLocaleDateString(locale, { ...chOptions, weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
            const chParts = chTime.split(':');
            document.getElementById('timeLausanne').innerHTML =
                chParts[0] + ':' + chParts[1] + '<span class="clock-seconds">:' + chParts[2] + '</span>';
            document.getElementById('dateLausanne').textContent = chDate;

            // Calculate time difference
            const cvOffset = getTimezoneOffset(now, MINDELO_TZ);
            const chOffset = getTimezoneOffset(now, LAUSANNE_TZ);
            const diffHours = (chOffset - cvOffset) / 60;
            const hourWord = diffHours !== 1 ? T.hours[currentLang] : T.hour[currentLang];
            document.getElementById('timeDiff').textContent = diffHours + ' ' + hourWord;

            // Update timezone labels
            const isDST = isSwissDST(now);
            document.getElementById('tzLausanne').textContent = isDST ? 'CEST (UTC+2)' : 'CET (UTC+1)';
            document.getElementById('tzMindelo').textContent = 'CVT (UTC‚àí1)';

            updateHappening(now);
            updateBestTimeToCall(now);
            refreshWeatherMeta();
        }

        function getTimezoneOffset(date, tz) {
            const utcStr = date.toLocaleString('en-US', { timeZone: 'UTC' });
            const tzStr = date.toLocaleString('en-US', { timeZone: tz });
            const utcDate = new Date(utcStr);
            const tzDate = new Date(tzStr);
            return (tzDate - utcDate) / 60000;
        }

        function isSwissDST(date) {
            const jan = new Date(date.getFullYear(), 0, 1);
            const jul = new Date(date.getFullYear(), 6, 1);
            const janOffset = getTimezoneOffset(jan, LAUSANNE_TZ);
            const julOffset = getTimezoneOffset(jul, LAUSANNE_TZ);
            const currentOffset = getTimezoneOffset(date, LAUSANNE_TZ);
            return currentOffset === Math.max(janOffset, julOffset);
        }

        function getHourInTZ(date, tz) {
            return parseInt(date.toLocaleString('en-GB', { timeZone: tz, hour: '2-digit', hour12: false }));
        }

        function getDayTypeInTZ(date, tz) {
            const weekday = new Intl.DateTimeFormat('en-US', {
                timeZone: tz,
                weekday: 'short'
            }).format(date);
            if (weekday === 'Sat') return 'sat';
            if (weekday === 'Sun') return 'sun';
            return 'weekday';
        }

        // ---- Call overlap ----
        const CALL_AWAKE_WINDOW = { start: 8 * 60, end: 21 * 60 };

        function getMinutesInTZ(date, tz) {
            const parts = new Intl.DateTimeFormat('en-GB', {
                timeZone: tz,
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            }).formatToParts(date);
            const hour = parseInt(parts.find(p => p.type === 'hour').value, 10);
            const minute = parseInt(parts.find(p => p.type === 'minute').value, 10);
            return (hour * 60) + minute;
        }

        function isWithinAwakeWindow(minutes) {
            return minutes >= CALL_AWAKE_WINDOW.start && minutes < CALL_AWAKE_WINDOW.end;
        }

        function isWeekendInTZ(date, tz) {
            const weekday = new Intl.DateTimeFormat('en-US', {
                timeZone: tz,
                weekday: 'short'
            }).format(date);
            return weekday === 'Sat' || weekday === 'Sun';
        }

        function isOverlapMoment(date) {
            const mindeloMinutes = getMinutesInTZ(date, MINDELO_TZ);
            const lausanneMinutes = getMinutesInTZ(date, LAUSANNE_TZ);
            const weekendInMindelo = isWeekendInTZ(date, MINDELO_TZ);
            const weekendInLausanne = isWeekendInTZ(date, LAUSANNE_TZ);
            return weekendInMindelo &&
                   weekendInLausanne &&
                   isWithinAwakeWindow(mindeloMinutes) &&
                   isWithinAwakeWindow(lausanneMinutes);
        }

        function getOverlapWindows(now) {
            const stepMs = 15 * 60 * 1000;
            const start = new Date(Math.floor(now.getTime() / stepMs) * stepMs);
            const windows = [];
            let activeStart = null;

            for (let i = 0; i <= 672; i++) {
                const slot = new Date(start.getTime() + (i * stepMs));
                const active = isOverlapMoment(slot);

                if (active && !activeStart) {
                    activeStart = slot;
                }

                if ((!active || i === 672) && activeStart) {
                    windows.push({ start: activeStart, end: slot });
                    activeStart = null;
                }
            }

            return windows;
        }

        function formatTimeInTZ(date, tz) {
            return date.toLocaleTimeString(LOCALES[currentLang], {
                timeZone: tz,
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
        }

        function formatOverlapWindow(window) {
            const chStart = formatTimeInTZ(window.start, LAUSANNE_TZ);
            const chEnd = formatTimeInTZ(window.end, LAUSANNE_TZ);
            const cvStart = formatTimeInTZ(window.start, MINDELO_TZ);
            const cvEnd = formatTimeInTZ(window.end, MINDELO_TZ);
            return `${chStart}-${chEnd} ${T.callWindowPrefix[currentLang]} ¬∑ ${cvStart}-${cvEnd} ${T.callWindowSuffix[currentLang]}`;
        }

        function updateBestTimeToCall(now) {
            const windows = getOverlapWindows(now);
            const currentWindow = windows.find(w => now >= w.start && now < w.end);
            const nextWindow = windows.find(w => w.start > now);
            const statusEl = document.getElementById('callStatus');
            const nextEl = document.getElementById('callNext');

            if (currentWindow) {
                statusEl.textContent = T.callStatusNow[currentLang];
                nextEl.textContent = `${T.callUntil[currentLang]} ${formatTimeInTZ(currentWindow.end, LAUSANNE_TZ)} ${T.callWindowPrefix[currentLang]} ¬∑ ${formatTimeInTZ(currentWindow.end, MINDELO_TZ)} ${T.callWindowSuffix[currentLang]}`;
                return;
            }

            if (nextWindow) {
                statusEl.textContent = T.callStatusLater[currentLang];
                nextEl.textContent = formatOverlapWindow(nextWindow);
                return;
            }

            statusEl.textContent = T.callStatusNone[currentLang];
            nextEl.textContent = T.callNoWindow[currentLang];
        }

        // ---- What's Happening Now ----
        function updateHappening(now) {
            const cvHour = getHourInTZ(now, MINDELO_TZ);
            const chHour = getHourInTZ(now, LAUSANNE_TZ);
            const cvDayType = getDayTypeInTZ(now, MINDELO_TZ);
            const chDayType = getDayTypeInTZ(now, LAUSANNE_TZ);

            const cvList = cvDayType === 'weekday'
                ? happeningCV[currentLang]
                : happeningCVWeekend[cvDayType][currentLang];
            const chList = chDayType === 'weekday'
                ? happeningCH[currentLang]
                : happeningCHWeekend[chDayType][currentLang];

            const cvScene = cvList.find(h => cvHour >= h.start && cvHour < h.end) || cvList[0];
            const chScene = chList.find(h => chHour >= h.start && chHour < h.end) || chList[0];

            document.getElementById('happeningCvEmoji').textContent = cvScene.emoji;
            document.getElementById('happeningCv').textContent = cvScene.text;
            document.getElementById('happeningChEmoji').textContent = chScene.emoji;
            document.getElementById('happeningCh').textContent = chScene.text;
        }

        // ---- Weather (Open-Meteo ‚Äî free, no API key needed) ----
        const WEATHER_CACHE_KEY = 'timeBridgeWeatherCacheV1';
        const WEATHER_META_IDS = { cv: 'weatherCvMeta', ch: 'weatherChMeta' };
        let weatherCache = loadWeatherCache();
        const weatherMeta = {
            cv: null,
            ch: null
        };

        function loadWeatherCache() {
            try {
                const raw = localStorage.getItem(WEATHER_CACHE_KEY);
                return raw ? JSON.parse(raw) : {};
            } catch (err) {
                return {};
            }
        }

        function saveWeatherCache() {
            try {
                localStorage.setItem(WEATHER_CACHE_KEY, JSON.stringify(weatherCache));
            } catch (err) {
                // Ignore storage failures (quota/private mode), live fetch still works.
            }
        }

        function formatUpdatedAgo(timestamp) {
            if (!timestamp) return '--';
            const diffMin = Math.floor((Date.now() - timestamp) / 60000);
            if (diffMin <= 0) {
                return `${T.updatedLabel[currentLang]}: ${T.updatedJustNow[currentLang]}`;
            }
            const agoPart = T.ago[currentLang] ? ` ${T.ago[currentLang]}` : '';
            return `${T.updatedLabel[currentLang]}: ${diffMin} ${diffMin === 1 ? T.minute[currentLang] : T.minutes[currentLang]}${agoPart}`;
        }

        function refreshWeatherMeta() {
            Object.keys(WEATHER_META_IDS).forEach(key => {
                const el = document.getElementById(WEATHER_META_IDS[key]);
                if (!el) return;
                const meta = weatherMeta[key];
                if (!meta) {
                    el.textContent = `${T.updatedLabel[currentLang]}: --`;
                    return;
                }
                if (meta.messageKey && T[meta.messageKey]) {
                    el.textContent = T[meta.messageKey][currentLang];
                    return;
                }
                let text = formatUpdatedAgo(meta.fetchedAt);
                if (meta.source === 'cache') {
                    text += ` ¬∑ ${T.usingCachedData[currentLang]}`;
                    if (meta.offline) text += ` ¬∑ ${T.offlineMode[currentLang]}`;
                }
                el.textContent = text;
            });
        }

        const WMO_EMOJIS = {
            0: '‚òÄÔ∏è', 1: 'üå§Ô∏è', 2: '‚õÖ', 3: '‚òÅÔ∏è',
            45: 'üå´Ô∏è', 48: 'üå´Ô∏è',
            51: 'üå¶Ô∏è', 53: 'üå¶Ô∏è', 55: 'üåßÔ∏è',
            61: 'üåßÔ∏è', 63: 'üåßÔ∏è', 65: 'üåßÔ∏è',
            71: 'üå®Ô∏è', 73: 'üå®Ô∏è', 75: '‚ùÑÔ∏è', 77: '‚ùÑÔ∏è',
            80: 'üå¶Ô∏è', 81: 'üåßÔ∏è', 82: 'üåßÔ∏è',
            85: 'üå®Ô∏è', 86: '‚ùÑÔ∏è',
            95: '‚õàÔ∏è', 96: '‚õàÔ∏è', 99: '‚õàÔ∏è'
        };

        function getWmoDesc(code) {
            const key = 'wmo' + code;
            return T[key] ? T[key][currentLang] : 'Unknown';
        }

        function renderWeather(containerId, current) {
            const code = current.weather_code;
            const emoji = WMO_EMOJIS[code] || 'üå°Ô∏è';
            const desc = getWmoDesc(code);
            const temp = Math.round(current.temperature_2m);
            const feelsLike = Math.round(current.apparent_temperature);
            const humidity = current.relative_humidity_2m;
            const wind = Math.round(current.wind_speed_10m);

            document.getElementById(containerId).innerHTML = `
                <div class="weather-icon">${emoji}</div>
                <div class="weather-temp">${temp}¬∞C</div>
                <div class="weather-desc">${desc}</div>
                <div class="weather-details">
                    <span>üå°Ô∏è ${T.feelsLike[currentLang]} ${feelsLike}¬∞</span>
                    <span>üíß ${humidity}%</span>
                    <span>üí® ${wind} km/h</span>
                </div>
            `;
        }

        function renderWeatherError(containerId, msg) {
            document.getElementById(containerId).innerHTML =
                `<div class="weather-error">${msg}</div>`;
        }

        function formatHHMMFromIso(isoString) {
            if (!isoString || !isoString.includes('T')) return '--:--';
            return isoString.split('T')[1].slice(0, 5);
        }

        function formatDayLength(seconds) {
            if (typeof seconds !== 'number' || Number.isNaN(seconds)) return '--';
            const totalMinutes = Math.floor(seconds / 60);
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            return `${hours}h ${minutes}m`;
        }

        function renderSun(containerId, daily) {
            const sunrise = formatHHMMFromIso(daily.sunrise && daily.sunrise[0]);
            const sunset = formatHHMMFromIso(daily.sunset && daily.sunset[0]);
            const dayLength = formatDayLength(daily.daylight_duration && daily.daylight_duration[0]);

            document.getElementById(containerId).innerHTML = `
                <div class="sun-grid">
                    <div class="sun-metric">
                        <div class="sun-metric-label">${T.sunrise[currentLang]}</div>
                        <div class="sun-metric-value">${sunrise}</div>
                    </div>
                    <div class="sun-metric">
                        <div class="sun-metric-label">${T.sunset[currentLang]}</div>
                        <div class="sun-metric-value">${sunset}</div>
                    </div>
                    <div class="sun-metric">
                        <div class="sun-metric-label">${T.dayLength[currentLang]}</div>
                        <div class="sun-metric-value">${dayLength}</div>
                    </div>
                </div>
            `;
        }

        function renderSunError(containerId, msg) {
            document.getElementById(containerId).innerHTML =
                `<div class="weather-error">${msg}</div>`;
        }

        function renderSunDiff(cvDaylight, chDaylight) {
            const diffEl = document.getElementById('sunDiff');
            if (typeof cvDaylight !== 'number' || typeof chDaylight !== 'number') {
                diffEl.textContent = T.sunDataUnavailable[currentLang];
                return;
            }

            const diffSeconds = Math.abs(chDaylight - cvDaylight);
            if (diffSeconds < 60) {
                diffEl.textContent = T.daylightSame[currentLang];
                return;
            }

            const city = chDaylight > cvDaylight ? T.cityLausanne[currentLang] : T.cityMindelo[currentLang];
            diffEl.textContent = `${T.daylightDiffPrefix[currentLang]}: ${formatDayLength(diffSeconds)} ${T.daylightLongerIn[currentLang]} ${city}`;
        }

        async function fetchWeather() {
            const cities = [
                { key: 'cv', lat: 16.89, lon: -24.98, tz: 'Atlantic/Cape_Verde', weatherContainer: 'weatherCvContent', sunContainer: 'sunCvContent' },
                { key: 'ch', lat: 46.52, lon: 6.63, tz: 'Europe/Zurich', weatherContainer: 'weatherChContent', sunContainer: 'sunChContent' }
            ];
            const daylightByCity = { cv: null, ch: null };

            function renderFromPayload(city, payload) {
                renderWeather(city.weatherContainer, payload.current);
                if (payload.daily && payload.daily.sunrise && payload.daily.sunset && payload.daily.daylight_duration) {
                    renderSun(city.sunContainer, payload.daily);
                    daylightByCity[city.key] = payload.daily.daylight_duration[0];
                } else {
                    renderSunError(city.sunContainer, T.sunDataUnavailable[currentLang]);
                }
            }

            for (const city of cities) {
                try {
                    const params = [
                        `latitude=${city.lat}`,
                        `longitude=${city.lon}`,
                        'current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m',
                        'daily=sunrise,sunset,daylight_duration',
                        `timezone=${encodeURIComponent(city.tz)}`
                    ].join('&');
                    const url = `https://api.open-meteo.com/v1/forecast?${params}`;
                    const res = await fetch(url);
                    if (!res.ok) {
                        throw new Error('HTTP ' + res.status);
                    }
                    const data = await res.json();
                    renderFromPayload(city, data);

                    const fetchedAt = Date.now();
                    weatherCache[city.key] = { payload: data, fetchedAt };
                    weatherMeta[city.key] = { fetchedAt, source: 'live', offline: false };
                } catch (err) {
                    const cached = weatherCache[city.key];
                    if (cached && cached.payload) {
                        renderFromPayload(city, cached.payload);
                        weatherMeta[city.key] = {
                            fetchedAt: cached.fetchedAt || Date.now(),
                            source: 'cache',
                            offline: !navigator.onLine
                        };
                    } else {
                        renderWeatherError(city.weatherContainer, T.weatherFetchError[currentLang]);
                        renderSunError(city.sunContainer, T.sunDataUnavailable[currentLang]);
                        weatherMeta[city.key] = { messageKey: 'weatherNoData' };
                    }
                }
            }
            saveWeatherCache();
            renderSunDiff(daylightByCity.cv, daylightByCity.ch);
            refreshWeatherMeta();
        }

        // ---- Cultural Calendar helpers ----
        function getEasterDate(year) {
            const a = year % 19;
            const b = Math.floor(year / 100);
            const c = year % 100;
            const d = Math.floor(b / 4);
            const e = b % 4;
            const f = Math.floor((b + 8) / 25);
            const g = Math.floor((b - f + 1) / 3);
            const h = (19 * a + b - d - g + 15) % 30;
            const i = Math.floor(c / 4);
            const k = c % 4;
            const l = (32 + 2 * e + 2 * i - h - k) % 7;
            const m = Math.floor((a + 11 * h + 22 * l) / 451);
            const month = Math.floor((h + l - 7 * m + 114) / 31);
            const day = ((h + l - 7 * m + 114) % 31) + 1;
            return new Date(year, month - 1, day);
        }

        function addDays(date, days) {
            const d = new Date(date);
            d.setDate(d.getDate() + days);
            return d;
        }

        function fmt(date) {
            const y = date.getFullYear();
            const m = String(date.getMonth() + 1).padStart(2, '0');
            const d = String(date.getDate()).padStart(2, '0');
            return `${y}-${m}-${d}`;
        }

        function getFederalFastMonday(year) {
            let d = new Date(year, 8, 1);
            const dayOfWeek = d.getDay();
            const firstSunday = dayOfWeek === 0 ? 1 : 8 - dayOfWeek;
            const thirdSunday = firstSunday + 14;
            return new Date(year, 8, thirdSunday + 1);
        }

        function renderCalendar() {
            const { cvEvents, chEvents } = getCulturalEvents();
            const now = new Date();
            now.setHours(0, 0, 0, 0);
            const locale = LOCALES[currentLang];

            function renderEvents(events, containerId, flag, title) {
                const sorted = events
                    .map(e => ({ ...e, dateObj: new Date(e.date + 'T00:00:00') }))
                    .sort((a, b) => a.dateObj - b.dateObj);

                const upcoming = sorted.filter(e => e.dateObj >= now);
                const past = sorted.filter(e => e.dateObj < now);
                const nextUp = upcoming[0];
                const rest = [...upcoming.slice(1), ...past];
                const listId = containerId + 'List';

                function eventHTML(e, isPast) {
                    const dateStr = e.dateObj.toLocaleDateString(locale, { day: 'numeric', month: 'short' });
                    return `
                        <div class="event-item ${isPast ? 'event-past' : ''}">
                            <div class="event-date">${dateStr}</div>
                            <div class="event-info">
                                <div class="event-name">${e.name}</div>
                                <div class="event-desc">${e.desc}</div>
                            </div>
                        </div>`;
                }

                const nextUpHTML = nextUp ? `
                    <div class="calendar-next">
                        <div class="event-date">${nextUp.dateObj.toLocaleDateString(locale, { day: 'numeric', month: 'short' })}</div>
                        <div class="event-info">
                            <div class="next-label">${T.nextUp[currentLang]}</div>
                            <div class="event-name">${nextUp.name}</div>
                            <div class="event-desc">${nextUp.desc}</div>
                        </div>
                    </div>` : '';

                const html = `
                    <div class="calendar-header">
                        <h3>${flag} ${title}</h3>
                        <span class="event-count">${sorted.length} ${T.events[currentLang]}</span>
                    </div>
                    ${nextUpHTML}
                    <div class="calendar-list-wrapper">
                        <div class="calendar-list" id="${listId}">
                            ${rest.map(e => eventHTML(e, e.dateObj < now)).join('')}
                        </div>
                        <div class="calendar-fade" id="${listId}Fade"></div>
                    </div>
                `;

                document.getElementById(containerId).innerHTML = html;

                const listEl = document.getElementById(listId);
                const fadeEl = document.getElementById(listId + 'Fade');
                if (listEl && fadeEl) {
                    function checkScroll() {
                        const atBottom = listEl.scrollHeight - listEl.scrollTop - listEl.clientHeight < 10;
                        fadeEl.classList.toggle('hidden', atBottom);
                        if (listEl.scrollHeight <= listEl.clientHeight) {
                            fadeEl.classList.add('hidden');
                        }
                    }
                    listEl.addEventListener('scroll', checkScroll);
                    checkScroll();
                }
            }

            renderEvents(cvEvents, 'calendarCv', 'üá®üáª', T.calendarCvTitle[currentLang]);
            renderEvents(chEvents, 'calendarCh', 'üá®üá≠', T.calendarChTitle[currentLang]);
        }

        // ---- Neuroscience Tips ----
        function renderNeuroTip() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 0);
            const dayOfYear = Math.floor((now - start) / 86400000);
            const tips = neuroTips[currentLang];
            const tipIndex = dayOfYear % tips.length;
            const tip = tips[tipIndex];

            document.getElementById('neuroCategory').textContent = tip.category;
            document.getElementById('neuroEmoji').textContent = tip.emoji;
            document.getElementById('neuroTip').textContent = tip.tip;
            document.getElementById('neuroSource').textContent = tip.source;
        }

        // ---- Initialize ----
        function init() {
            // Apply saved language
            setLanguage(currentLang);

            // Start clock interval
            setInterval(updateClocks, 1000);
            // Refresh weather every 10 minutes
            setInterval(fetchWeather, 600000);
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    })();
    </script>
</body>
</html>
